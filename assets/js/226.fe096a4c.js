(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{605:function(t,a,e){"use strict";e.r(a);var s=e(0),o=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"proto-操作指南"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#proto-操作指南","aria-hidden":"true"}},[t._v("#")]),t._v(" proto - 操作指南")]),t._v(" "),e("blockquote",[e("p",[t._v("由哪些需要注意的细节")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#proto---%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97"}},[t._v("proto - 操作指南")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#11-%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86---%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%80%BC%E7%B1%BB%E5%9E%8B"}},[t._v("1.1. 前置知识 - 引用类型和值类型")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#12-%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0%E5%B7%AE%E5%BC%82"}},[t._v("1.2. 内建函数差异")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#121-objectgetprototypeof"}},[t._v("1.2.1. Object.getPrototypeof")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#122-objectprototypeisprototypeof"}},[t._v("1.2.2. Object.prototype.isPrototypeOf()")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#123-objectsetprototypeof--objectcreate"}},[t._v("1.2.3. Object.setPrototypeOf() && Object.create()")])])])])])])]),t._v(" "),e("h2",{attrs:{id:"_1-1-前置知识-引用类型和值类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-前置知识-引用类型和值类型","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1. 前置知识 - 引用类型和值类型")]),t._v(" "),e("p",[t._v("见"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%B7%AE%E5%BC%82.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-引用类型和值类型"),e("OutboundLink")],1),t._v(" - 同时里面提到了手动修改"),e("code",[t._v("prototype")]),t._v("的情况。")]),t._v(" "),e("h2",{attrs:{id:"_1-2-内建函数差异"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-内建函数差异","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2. 内建函数差异")]),t._v(" "),e("blockquote",[e("p",[t._v("虽然名字带有prototype，但是其实操作的还是"),e("code",[t._v("__proto__")])])]),t._v(" "),e("ul",[e("li",[t._v("Object.getPrototypeof")]),t._v(" "),e("li",[t._v("Object.setPrototypeOf()")]),t._v(" "),e("li",[t._v("Object.prototype.isPrototypeOf()")]),t._v(" "),e("li",[t._v("Object.create()")])]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("myName")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Bar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("label")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" label"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or Bar.prototype = new Foo()")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("speak")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bar "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("由"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS-__proto__%26%26prototype%26%26new.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-proto&prototype&constructor&new"),e("OutboundLink")],1),t._v("，可以得到"),e("code",[t._v("bar")]),t._v("内部结构为：")]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("name\nlabel\n__proto__ "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// proto1")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Bar.prototype")]),t._v("\n  speak\n  __proto__ "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// proto2")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 来自Foo.prototype")]),t._v("\n    myName\n    constructor\n    __proto__\n")])])]),e("h3",{attrs:{id:"_1-2-1-object-getprototypeof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-object-getprototypeof","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2.1. Object.getPrototypeof")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("Object.getPrototypeof()")]),t._v(" - "),e("strong",[t._v("获取的是最外层的"),e("code",[t._v("__proto__")])]),t._v("。并不是获取"),e("code",[t._v("prototype")]),t._v("。")])]),t._v(" "),e("p",[t._v("我的意思是获取"),e("code",[t._v("a.__proto__")]),t._v("而不是"),e("code",[t._v("a.prototype")]),t._v("。在"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS-__proto__%26%26prototype%26%26new.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-proto&prototype"),e("OutboundLink")],1),t._v("中我们知道，其实对象不一定就"),e("code",[t._v("prototype")]),t._v("属性。")]),t._v(" "),e("p",[t._v("就像是在"),e("a",{attrs:{href:""}},[t._v("1.2. 内建函数差异")]),e("code",[t._v("bar")]),t._v("内部结构中，我们获取的是"),e("code",[t._v("proto1")]),t._v("而不是"),e("code",[t._v("proto2")]),t._v("。")]),t._v(" "),e("h3",{attrs:{id:"_1-2-2-object-prototype-isprototypeof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-object-prototype-isprototypeof","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2.2. Object.prototype.isPrototypeOf()")]),t._v(" "),e("blockquote",[e("p",[t._v("有点类似"),e("code",[t._v("instanceof")]),t._v("。同时注意这是个"),e("code",[t._v("prototype")]),t._v("上的方法，意味着它可以被对象继承，通过"),e("code",[t._v("xx.isPrototypeOf")]),t._v("使用而不是"),e("code",[t._v("Object.")])])]),t._v(" "),e("p",[t._v("类似"),e("code",[t._v("instanceof")]),t._v("意味着它会 "),e("strong",[t._v("递归比较！")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("Bar.prototype.isPrototypeOf(bar) // true")])]),t._v(" "),e("li",[e("code",[t._v("Foo.prototype.isPrototypeOf(bar) // true")])])]),t._v(" "),e("p",[t._v("同样也有和"),e("code",[t._v("instanceof")]),t._v("一样的问题，如果"),e("code",[t._v("Bar.prototype = {}")]),t._v("，"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%B7%AE%E5%BC%82.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-引用类型和值类型"),e("OutboundLink")],1),t._v("提到的并不会同步修改"),e("code",[t._v("proto1")]),t._v("。此时导致"),e("code",[t._v("Bar.prototype.isPrototypeOf(bar) // false")])]),t._v(" "),e("h3",{attrs:{id:"_1-2-3-object-setprototypeof-object-create"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-object-setprototypeof-object-create","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2.3. Object.setPrototypeOf() && Object.create()")]),t._v(" "),e("blockquote",[e("p",[t._v("语义上都是设置新的原型。")])]),t._v(" "),e("p",[t._v("使用上也有差异：")]),t._v(" "),e("p",[e("code",[t._v("Object.setPrototypeOf(bar, xx)")]),t._v("会替换"),e("code",[t._v("bar")]),t._v("最外层的"),e("code",[t._v("__proto__")]),t._v("(也就是"),e("code",[t._v("proto1")]),t._v(")为"),e("code",[t._v("xx")]),t._v("。")]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("c")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nObject"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrototypeOf")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 首先我们要知道c内部结构")]),t._v("\n__proto__\n  constructor\n    prototype\nprototype\n  constructor\n  __prototype\n")])])]),e("p",[t._v("因此经过了"),e("code",[t._v("Object.setPrototypeOf(bar, xx)")]),t._v("操作之后，"),e("code",[t._v("bar")]),t._v("结构变为了：")]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("name\nlabel\n__proto__ "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// proto1")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以下来自function c")]),t._v("\n  prototype\n    constructor\n    __prototype\n")])])]),e("p",[t._v("而对于"),e("code",[t._v("Object.create(c.prototype)")]),t._v("。就像是"),e("a",{attrs:{href:""}},[t._v("1.2. 内建函数差异")]),t._v("使用的那样，我们先知道"),e("code",[t._v("Object.create")]),t._v("返回结果：")]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("__proto__\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// c.prototype")]),t._v("\n  constructor\n  __proto__\n")])])]),e("p",[t._v("正如"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%B7%AE%E5%BC%82.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-引用类型和值类型"),e("OutboundLink")],1),t._v("提到的那样，如果：")]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 并不会同步修改proto1")]),t._v("\n")])])]),e("p",[t._v("想要达到"),e("code",[t._v("Object.setPrototypeOf(bar, xx)")]),t._v("一样的效果。必须通过"),e("code",[t._v("bar.__proto__ = Object.create(c.prototype)")]),t._v("。")])])},[],!1,null,null,null);a.default=o.exports}}]);