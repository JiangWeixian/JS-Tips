(window.webpackJsonp=window.webpackJsonp||[]).push([[335],{302:function(t,s,a){"use strict";a.r(s);var e=a(0),v=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vuex-如何使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex-如何使用"}},[t._v("#")]),t._v(" Vuex - 如何使用")]),t._v(" "),a("blockquote",[a("p",[t._v("希望能够做到记忆深刻，而不是看例子；也有很多版本，也做一个汇总")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#vuex---%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8"}},[t._v("Vuex - 如何使用")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8D%95store%E7%8A%B6%E6%80%81---%E5%88%86%E5%BC%80%E6%96%87%E4%BB%B6%E4%B9%A6%E5%86%99"}},[a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v("状态 - 分开文件书写")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%8D%95store---%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A0%BC%E5%BC%8F%E8%A7%84%E5%88%99"}},[a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v(" - 初始化格式规则")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8D%95store---%E5%90%84%E9%83%A8%E5%88%86%E4%B9%A6%E5%86%99%E8%A7%84%E5%88%99"}},[a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v(" - 各部分书写规则")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8D%95store---%E5%A6%82%E4%BD%95%E8%A7%A6%E5%8F%91"}},[a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v(" - 如何触发")])])])])])]),t._v(" "),a("h1",{attrs:{id:"单store状态-分开文件书写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单store状态-分开文件书写"}},[t._v("#")]),t._v(" "),a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v("状态 - 分开文件书写")])]),t._v(" "),a("blockquote",[a("p",[t._v("指的是只有一组"),a("code",[t._v("store")]),t._v("状态需要维护，并将"),a("code",[t._v("action mutation etc")]),t._v("分开文件进行维护。")])]),t._v(" "),a("h2",{attrs:{id:"单store-初始化格式规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单store-初始化格式规则"}},[t._v("#")]),t._v(" "),a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v(" - 初始化格式规则")])]),t._v(" "),a("blockquote",[a("p",[t._v("初始化")])]),t._v(" "),a("p",[a("strong",[t._v("含有四个部分")])]),t._v(" "),a("blockquote",[a("p",[t._v("构建一个"),a("code",[t._v("store")]),t._v("，并不是需要全部以下四个部分。缺少一个一部分也是可以的，类如缺少"),a("code",[t._v("actions")]),t._v("部分，那么就没有办法通过"),a("code",[t._v("dispatch")]),t._v("触发"),a("code",[t._v("action")]),t._v("。")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("mutations")])]),t._v(" "),a("li",[a("code",[t._v("action")])]),t._v(" "),a("li",[a("code",[t._v("getters")])]),t._v(" "),a("li",[a("code",[t._v("state")])])]),t._v(" "),a("p",[t._v("这四个部分你可以分别写在我四个文件中，或者写在同一个文件中。"),a("strong",[t._v("这里说明的是四个文件时候的情况，")]),t._v(" 可参考"),a("a",{attrs:{href:"#%E5%8D%95store---%E5%90%84%E9%83%A8%E5%88%86%E4%B9%A6%E5%86%99%E8%A7%84%E5%88%99"}},[t._v("各部分书写规则")]),t._v("部分。")]),t._v(" "),a("p",[a("strong",[t._v("导出"),a("code",[t._v("vuex")]),t._v("使用")])]),t._v(" "),a("blockquote",[a("p",[t._v("模块导入导出也逃不过"),a("code",[t._v("es6")]),t._v("规则")])]),t._v(" "),a("blockquote",[a("p",[t._v("文件夹中"),a("code",[t._v("index.js")]),t._v("将会作为模块导出根文件；如果"),a("code",[t._v("store/index.js")]),t._v("，那么"),a("code",[t._v("import store from './store'")]),t._v("将会使用"),a("code",[t._v("index.js")]),t._v("导出的内容")])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vuex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Store")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  actions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  getters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mutations\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("题外话 -")]),t._v(" 这样的导出为什么可以通过"),a("code",[t._v("this.$store.dispatch")]),t._v("触发对应的的"),a("code",[t._v("api")]),t._v("?")]),t._v(" "),a("blockquote",[a("p",[t._v("这是因为"),a("code",[t._v("es6")]),t._v("新特性。因为"),a("code",[t._v("{}")]),t._v("明显是一个对象，应该是有"),a("code",[t._v("key")]),t._v("值。但是这样直接写的方式，是 "),a("strong",[t._v("同步创建同名的"),a("code",[t._v("actions or getters")])]),t._v("。因此可以知道传递是"),a("code",[t._v("getters")]),t._v("还是"),a("code",[t._v("actions")]),t._v("。")])]),t._v(" "),a("p",[a("strong",[t._v("将"),a("code",[t._v("store")]),t._v("加入"),a("code",[t._v("vue")])])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("在"),a("code",[t._v("store/index.js")]),t._v("文件中，先将"),a("code",[t._v("vuex")]),t._v("加入"),a("code",[t._v("vue")]),t._v("，通过"),a("code",[t._v("Vue.use(Vuex)")]),t._v("；并定义和导出"),a("code",[t._v("store")]),t._v("，通过"),a("code",[t._v("export default new Vuex.store({})")])])]),t._v(" "),a("li",[a("p",[t._v("在将"),a("code",[t._v("store")]),t._v("导入"),a("code",[t._v("vue")])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./store'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  store\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"单store-各部分书写规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单store-各部分书写规则"}},[t._v("#")]),t._v(" "),a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v(" - 各部分书写规则")])]),t._v(" "),a("blockquote",[a("p",[t._v("在多"),a("code",[t._v("store")]),t._v("维护部分也是成立的")])]),t._v(" "),a("blockquote",[a("p",[t._v("由于是多文件，所以每部分都要"),a("code",[t._v("export defalut")]),t._v("，例如"),a("code",[t._v("export defalut state")]),t._v("。然后合并为一个"),a("code",[t._v("store")]),t._v("。")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("mutations")]),t._v(" - 函数对象")]),t._v(" "),a("blockquote",[a("p",[t._v("写在"),a("code",[t._v("mutations")]),t._v("对象中函数第1个默认接受"),a("code",[t._v("state")]),t._v("，后面参数才是传递给对应"),a("code",[t._v("mutaions")]),t._v("函数的参数。")])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mutations "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("action")]),t._v(" - 函数对象")]),t._v(" "),a("blockquote",[a("p",[t._v("写在"),a("code",[t._v("actions")]),t._v("对象函数第1个函数默认是"),a("code",[t._v("context")]),t._v("对象，为"),a("code",[t._v("{commit, state}")]),t._v("组合构成的对象")])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" actions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("commit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("getters")]),t._v(" - 函数对象")]),t._v(" "),a("blockquote",[a("p",[t._v("写在"),a("code",[t._v("getters")]),t._v("对象中，函数第1个参数是"),a("code",[t._v("state")]),t._v("。官方链接有个"),a("a",{attrs:{href:"https://vuex.vuejs.org/guide/getters.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("动态getters"),a("OutboundLink")],1),t._v("实现方式。")])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" getters "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("一般会有"),a("code",[t._v("value")]),t._v("返回")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("state")]),t._v(" - 数据对象")])])]),t._v(" "),a("h2",{attrs:{id:"单store-如何触发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单store-如何触发"}},[t._v("#")]),t._v(" "),a("strong",[t._v("单"),a("code",[t._v("Store")]),t._v(" - 如何触发")])]),t._v(" "),a("blockquote",[a("p",[t._v("分为"),a("code",[t._v("map...")]),t._v("以及"),a("code",[t._v("this.$store")]),t._v("两种触发方式")])]),t._v(" "),a("blockquote",[a("p",[t._v("至于"),a("code",[t._v("actions or mutations")]),t._v("函数要在哪里触发并没有严格的规定")])]),t._v(" "),a("p",[a("code",[t._v("map")]),t._v("方式对四个模块都是成立的，例如"),a("code",[t._v("mapMutations")]),t._v("，以"),a("code",[t._v("mapGetters")]),t._v("举例(不过有些是写在"),a("code",[t._v("vue computed")]),t._v("中，而有一些是写在"),a("code",[t._v("vue methods")]),t._v("其中)：")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// computed中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapGetters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yy'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注意传递"),a("code",[t._v("[]")]),t._v("还是"),a("code",[t._v("{}")]),t._v("两个的区别")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("对于"),a("code",[t._v("[]")]),t._v(" - "),a("code",[t._v("xx or yy")]),t._v("需要带有引号，"),a("code",[t._v("xx yy")]),t._v("就是"),a("code",[t._v("getters")]),t._v("中定义的函数对象")])]),t._v(" "),a("li",[a("p",[t._v("对于"),a("code",[t._v("{}")]),t._v(" - 可以将"),a("code",[t._v("xx or yy")]),t._v("赋值給一个新的"),a("code",[t._v("key")]),t._v("，就像是")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapGetters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xx'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("这样就有了新的名字，特殊需求(避免冲突，个人喜好)")])])]),t._v(" "),a("p",[a("strong",[a("code",[t._v("this.$store")]),t._v("方式触发")])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("state getters")]),t._v("本质属于一种类型，数据类型；"),a("code",[t._v("mutations actions")]),t._v("属于另外一种类型，因为是函数。")])]),t._v(" "),a("blockquote",[a("p",[t._v("所有都应该通过"),a("code",[t._v("this.$store")]),t._v("找到或者触发")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("state")]),t._v(" - "),a("code",[t._v("this.$store.state")])]),t._v(" "),a("li",[a("code",[t._v("getters")]),t._v(" - "),a("code",[t._v("this.$store.getters")])]),t._v(" "),a("li",[a("code",[t._v("actions")]),t._v(" - "),a("code",[t._v("this.$store.dispatch('xx', args)")]),t._v("分别是函数名以及传递给函数的参数")]),t._v(" "),a("li",[a("code",[t._v("mutations")]),t._v(" - "),a("code",[t._v("this.$store.commit('xx', args)")]),t._v("参数和上面一致。\n"),a("ul",[a("li",[t._v("同样也可以在"),a("code",[t._v("actions")]),t._v("函数中触发，通过"),a("code",[t._v("commit('xx', args)")])])])])])])}),[],!1,null,null,null);s.default=v.exports}}]);