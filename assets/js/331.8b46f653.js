(window.webpackJsonp=window.webpackJsonp||[]).push([[331],{357:function(e,t,r){"use strict";r.r(t);var o=r(0),v=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"react-router"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react-router"}},[e._v("#")]),e._v(" React - router")]),e._v(" "),r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#配置方式"}},[e._v("配置方式")])]),r("li",[r("a",{attrs:{href:"#component-vs-render"}},[e._v("Component vs Render")]),r("ul",[r("li",[r("a",{attrs:{href:"#refs"}},[e._v("Refs")])])])]),r("li",[r("a",{attrs:{href:"#keepalive"}},[e._v("KeepAlive")]),r("ul",[r("li",[r("a",{attrs:{href:"#refs"}},[e._v("Refs")])])])])])]),r("p"),e._v(" "),r("h2",{attrs:{id:"配置方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置方式"}},[e._v("#")]),e._v(" 配置方式")]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[r("code",[e._v("config")]),e._v("的做法灵活的地方（或者说是不太开箱即用的特性）在于你需要自己去解析"),r("code",[e._v("route config")]),e._v("。并没有特别开箱即用的感觉。")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://reacttraining.com/react-router/web/example/route-config",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考链接"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("这种方式是比较接近"),r("code",[e._v("vue-router")]),e._v("的书写方式的，可以参考学习。")]),e._v(" "),r("h2",{attrs:{id:"component-vs-render"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#component-vs-render"}},[e._v("#")]),e._v(" Component vs Render")]),e._v(" "),r("p",[e._v("在"),r("code",[e._v("<route />")]),e._v("组件上，支持"),r("code",[e._v("components")]),e._v("以及"),r("code",[e._v("render")]),e._v("两个属性。")]),e._v(" "),r("p",[r("strong",[e._v("为什么需要设置好两个属性？有什么区别？")])]),e._v(" "),r("p",[e._v("先看结论。首先两个在功能没有什么区别，并没有什么功能上的缺失。"),r("strong",[e._v("不过"),r("code",[e._v("render")]),e._v("可能需要手动传递一遍"),r("code",[e._v("props")]),e._v("。")])]),e._v(" "),r("ul",[r("li",[e._v("如果使用的是"),r("code",[e._v("function component")]),e._v(" - 那么最好使用"),r("code",[e._v("render")])]),e._v(" "),r("li",[e._v("如果使用的是"),r("code",[e._v("class component")]),e._v(" - 那么两个就没什么区别")])]),e._v(" "),r("p",[r("strong",[e._v("如果使用"),r("code",[e._v("component")]),e._v("渲染"),r("code",[e._v("function component")]),e._v("的话。")]),e._v(" (或者直接看以下"),r("a",{attrs:{href:"https://www.imooc.com/article/263948",target:"_blank",rel:"noopener noreferrer"}},[e._v("比较纤细纤细的解释"),r("OutboundLink")],1),e._v(") 起因为：")]),e._v(" "),r("ol",[r("li",[r("code",[e._v("function component")]),e._v("通过"),r("code",[e._v("react.createElement")]),e._v("的方式创建的组件没有"),r("code",[e._v("type")]),e._v("。")]),e._v(" "),r("li",[e._v("如果路由没有变化，只是传递给组件的"),r("code",[e._v("props")]),e._v("在变化")])]),e._v(" "),r("p",[e._v("就会发现组件频繁的被"),r("code",[e._v("mount and unmout")]),e._v("（按道理来说，应该只有第一次发生"),r("code",[e._v("mount")]),e._v("）之后的钩子函数应该是"),r("code",[e._v("recevieprops")]),e._v("的"),r("code",[e._v("update")]),e._v("。")]),e._v(" "),r("p",[e._v("频繁"),r("code",[e._v("mount")]),e._v("一定是不对。")]),e._v(" "),r("p",[e._v("而由于"),r("code",[e._v("function component")]),e._v("没有"),r("code",[e._v("type")]),e._v("，通过"),r("code",[e._v("type or key")]),e._v("比较的时候认为不同的"),r("code",[e._v("route component")]),e._v("。所以就会出现不合理的情况。")]),e._v(" "),r("h3",{attrs:{id:"refs"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#refs"}},[e._v("#")]),e._v(" Refs")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.imooc.com/article/263948",target:"_blank",rel:"noopener noreferrer"}},[e._v("比较纤细纤细的解释"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.notion.so/umi-router-c706a687f53d4fbbad04a76d127e815f#af1cc997f1154ea698142a5c53de1cda",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方解释"),r("OutboundLink")],1)])]),e._v(" "),r("h2",{attrs:{id:"keepalive"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#keepalive"}},[e._v("#")]),e._v(" KeepAlive")]),e._v(" "),r("p",[e._v("目前为止，官方其实并没有这样的支持。")]),e._v(" "),r("p",[e._v("也就是说进入下一个路由会导致上一个路由组件的"),r("code",[e._v("unmount")]),e._v("。")]),e._v(" "),r("p",[r("strong",[e._v("那么KeepAlive原理是什么？")]),e._v(" 可以参考"),r("a",{attrs:{href:"https://github.com/facebook/react/issues/12039",target:"_blank",rel:"noopener noreferrer"}},[e._v("facebook-react官方解释"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("本质上就是当将所有需要"),r("code",[e._v("keepalive")]),e._v("的组件全部被一个父类组件包括。这些"),r("code",[e._v("keepalive")]),e._v("的组件"),r("code",[e._v("path")]),e._v("全部导流到该父类组件。")]),e._v(" "),r("p",[e._v("然后由父类组件控制"),r("code",[e._v("display: block or hidden")]),e._v("。这样就没有"),r("code",[e._v("umount")]),e._v("的问题。")]),e._v(" "),r("h3",{attrs:{id:"refs-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#refs-2"}},[e._v("#")]),e._v(" Refs")]),e._v(" "),r("p",[e._v("如果懒得写。")]),e._v(" "),r("p",[e._v("可以用别人写好的"),r("a",{attrs:{href:"https://github.com/fi3ework/react-live-route/blob/master/docs/README-zh.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("live-router"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=v.exports}}]);