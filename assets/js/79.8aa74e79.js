(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{370:function(v,t,_){"use strict";_.r(t);var e=_(0),a=Object(e.a)({},(function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"dom事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dom事件"}},[v._v("#")]),v._v(" DOM事件")]),v._v(" "),_("blockquote",[_("p",[v._v("对ie总是要区别对待，默认讨论的是非IE")])]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#dom%E4%BA%8B%E4%BB%B6"}},[v._v("DOM事件")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E4%BA%8B%E4%BB%B6%E6%B5%81"}},[v._v("事件流")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#this%E6%8C%87%E5%90%91"}},[_("code",[v._v("this")]),v._v("指向")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BA%8B%E4%BB%B6"}},[v._v("不同的事件")])])])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"}},[v._v("事件对象")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E9%BB%98%E8%AE%A4%E4%BA%8B%E4%BB%B6"}},[v._v("什么是默认事件")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E5%8F%96%E6%B6%88%E5%86%92%E6%B3%A1%E5%92%8C%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E4%BA%8B%E4%BB%B6"}},[v._v("取消冒泡和阻止默认事件")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E6%89%8B%E5%8A%A8%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6"}},[v._v("手动触发事件")])])])])])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B"}},[v._v("事件类型")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#html5"}},[v._v("HTML5")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E6%80%A7%E8%83%BD"}},[v._v("性能")])])])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E6%A8%A1%E6%8B%9F%E4%BA%8B%E4%BB%B6"}},[v._v("模拟事件")])])])])]),v._v(" "),_("h2",{attrs:{id:"事件流"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#事件流"}},[v._v("#")]),v._v(" 事件流")]),v._v(" "),_("p",[_("strong",[v._v("DOM2")])]),v._v(" "),_("p",[v._v("这里说的事件流是"),_("code",[v._v("DOM2")]),v._v("级事件流，事件触发顺序为 "),_("strong",[v._v("捕获->触发->冒泡")]),v._v("。")]),v._v(" "),_("p",[v._v("具体实现可见"),_("a",{attrs:{href:""}},[v._v("DOM事件定义")])]),v._v(" "),_("p",[_("strong",[v._v("DOM0")])]),v._v(" "),_("p",[v._v("就是通过"),_("code",[v._v("onclick")]),v._v("来实现的。")]),v._v(" "),_("p",[v._v("前者优势比较大，因为可以删除(和性能有关)，还可以在同一个事件上面绑定函数。")]),v._v(" "),_("p",[v._v("而后者只能实现一个。")]),v._v(" "),_("p",[v._v("如果在"),_("code",[v._v("document")]),v._v("绑定了"),_("code",[v._v("addEvent..")]),v._v("以及"),_("code",[v._v("onclick")]),v._v("，同时文档按钮"),_("code",[v._v("addEvent")])]),v._v(" "),_("p",[v._v("如果点击按钮，虽然也是点击在"),_("code",[v._v("document")]),v._v("上，但是"),_("code",[v._v("button")]),v._v("才是target。所以"),_("code",[v._v("document")]),v._v("的"),_("code",[v._v("dom2")]),v._v("是捕获阶段触发，"),_("code",[v._v("button")]),v._v("是触发阶段触发。")]),v._v(" "),_("p",[_("code",[v._v("document.onclick")]),v._v("是冒泡阶段。")]),v._v(" "),_("p",[_("strong",[v._v("说明onclick")]),v._v("默认是冒泡的。")]),v._v(" "),_("h3",{attrs:{id:"this指向"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#this指向"}},[v._v("#")]),v._v(" "),_("code",[v._v("this")]),v._v("指向")]),v._v(" "),_("p",[v._v("在"),_("code",[v._v("ie")]),v._v("和它浏览器上，"),_("code",[v._v("this")]),v._v("指向不同")]),v._v(" "),_("div",{staticClass:"language-JavaScript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[v._v("// ie attachEvent")]),v._v("\ndocument"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[v._v("addEventLinster")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v("'click'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(",")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("function")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("{")]),v._v("\n  console"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[v._v("log")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("this")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("}")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[v._v("// 非ie上是document")]),v._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[v._v("// ie上是windows")]),v._v("\n")])])]),_("h3",{attrs:{id:"不同的事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#不同的事件"}},[v._v("#")]),v._v(" 不同的事件")]),v._v(" "),_("p",[v._v("不同"),_("code",[v._v("event")]),v._v("可能具有不同属性，处理表现结果不一样之外。")]),v._v(" "),_("p",[v._v("在是否支持冒泡，是否支持捕获上有所不同。")]),v._v(" "),_("h2",{attrs:{id:"事件对象"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#事件对象"}},[v._v("#")]),v._v(" 事件对象")]),v._v(" "),_("p",[v._v("指的是"),_("code",[v._v("function (event) {}")]),v._v("中的"),_("code",[v._v("event")]),v._v("。而 "),_("strong",[v._v("非IE浏览器的")]),_("code",[v._v("event")]),v._v("一般有以下属性：")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/JiangWeixian/JS-Books/master/JS%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/CH13-DOM%E4%BA%8B%E4%BB%B6/img/%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7.PNG",alt:"event属性"}})]),v._v(" "),_("p",[v._v("所以可以通过判断"),_("code",[v._v("event")]),v._v("属性来判断事件是否支持冒泡。")]),v._v(" "),_("ul",[_("li",[v._v("current or target - 区别在于，你可能点击的是"),_("code",[v._v("btn")]),v._v("。那么"),_("code",[v._v("target")]),v._v("就是"),_("code",[v._v("btn")]),v._v("，但是在传递到"),_("code",[v._v("btn")]),v._v("之前，可能被其他元素捕获了。那么此时就有"),_("code",[v._v("currenttarget")]),v._v("属性")]),v._v(" "),_("li",[v._v("通过查看"),_("code",[v._v("eventPhase")]),v._v("可以查看元素在哪个阶段触发了事件")])]),v._v(" "),_("p",[v._v("而"),_("code",[v._v("IE")]),v._v("上的事件属性为:")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/JiangWeixian/JS-Books/master/JS%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/CH13-DOM%E4%BA%8B%E4%BB%B6/img/ie%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7.PNG",alt:"ie-event属性"}})]),v._v(" "),_("p",[_("strong",[v._v("QA")])]),v._v(" "),_("ol",[_("li",[v._v("有的时候可以看见"),_("code",[v._v("ev = event || window.event(传递过来的)")])])]),v._v(" "),_("p",[v._v("这是为了适配"),_("code",[v._v("ie")]),v._v("浏览器，因为"),_("code",[v._v("ie")]),v._v("事件是在"),_("code",[v._v("window")]),v._v("上的。")]),v._v(" "),_("h3",{attrs:{id:"什么是默认事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是默认事件"}},[v._v("#")]),v._v(" 什么是默认事件")]),v._v(" "),_("p",[v._v("比如点击链接会跳转，在有表单"),_("code",[v._v("submit")]),v._v("的时候"),_("code",[v._v("enter")]),v._v("按键会触发提交，等等。这些都是默认事件。")]),v._v(" "),_("p",[v._v("可以通过绑定事件的时候 "),_("strong",[v._v("阻止默认行为")]),v._v("。")]),v._v(" "),_("h4",{attrs:{id:"取消冒泡和阻止默认事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#取消冒泡和阻止默认事件"}},[v._v("#")]),v._v(" 取消冒泡和阻止默认事件")]),v._v(" "),_("ul",[_("li",[v._v("在ie上可以通过"),_("code",[v._v("window.event.cancelBubble = true")]),v._v("阻止冒泡，"),_("code",[v._v("window.event.returnValue = false")])]),v._v(" "),_("li",[v._v("而非ie就是"),_("code",[v._v("stop..")]),v._v("和"),_("code",[v._v("pre..")])])]),v._v(" "),_("h4",{attrs:{id:"手动触发事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#手动触发事件"}},[v._v("#")]),v._v(" 手动触发事件")]),v._v(" "),_("h2",{attrs:{id:"事件类型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#事件类型"}},[v._v("#")]),v._v(" 事件类型")]),v._v(" "),_("p",[v._v("这里详细说明了不同类型事件以及特性，比如"),_("code",[v._v("click mouse etc..")]),v._v("，判断事件是否支持可以通过以下方式：")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/JiangWeixian/JS-Books/master/JS%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/CH13-DOM%E4%BA%8B%E4%BB%B6/img/%E5%88%A4%E6%96%AD%E4%BA%8B%E4%BB%B6%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81.PNG",alt:"判断事件是否支持"}})]),v._v(" "),_("p",[v._v("这里判读是否支持"),_("code",[v._v("focus")]),v._v("事件，类似还有"),_("code",[v._v("mouse")]),v._v("等。")]),v._v(" "),_("ul",[_("li",[v._v("UI事件 - 比如说"),_("code",[v._v("load resize scroll select etc")]),v._v(" "),_("ul",[_("li",[v._v("load - 在页面一切都完毕之后加载，比如说"),_("code",[v._v("js css")]),v._v("等。还有一个"),_("code",[v._v("DOMContentLoaded")]),v._v("事件在页面"),_("code",[v._v("DOM")]),v._v("解析之后加载")]),v._v(" "),_("li",[v._v("unload - 离开页面的时候触发，一般用来清除内存")]),v._v(" "),_("li",[v._v("srcoll - 绑定在"),_("code",[v._v("windows")]),v._v("，但是是通过"),_("code",[v._v("document.documentElement.scrollTop || document.body.scrollTop")]),v._v("来监听这一变化的")])])]),v._v(" "),_("li",[v._v("click - 其中"),_("code",[v._v(".screenX")]),v._v("和"),_("code",[v._v("clientX")]),v._v("区别在于一个是屏幕的，一个是浏览器的。")]),v._v(" "),_("li",[v._v("键盘事件 - 通过"),_("code",[v._v("keycode")]),v._v("来判断按下了哪个按钮")]),v._v(" "),_("li",[v._v("变化事件 - 可以监听dom变化")])]),v._v(" "),_("p",[_("strong",[v._v("键盘上有alt shift等比较特殊的按键")]),v._v("，如果我们想要实现组合，比如说"),_("code",[v._v("alt+右键")]),v._v("。在"),_("code",[v._v("mouse")]),v._v("事件中可以通过"),_("code",[v._v("event.altKey")]),v._v("来同时监听"),_("code",[v._v("alt")]),v._v("而不需要额外绑定键盘事件。")]),v._v(" "),_("h3",{attrs:{id:"html5"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#html5"}},[v._v("#")]),v._v(" HTML5")]),v._v(" "),_("ul",[_("li",[v._v("contextmeun - 菜单通过右键触发，默认都是有的。我们可以阻止这个默认事件，然后自己定义个菜单显示。")]),v._v(" "),_("li",[v._v("haschange - 监听"),_("code",[v._v("url")]),v._v("变化")]),v._v(" "),_("li",[v._v("以及一些 "),_("strong",[v._v("移动设备")]),v._v("的事件，例如设备加速度计，和各种方向。\n"),_("ul",[_("li",[v._v("还有一些触摸事件")]),v._v(" "),_("li",[v._v("一些手势事件 - 也就是多个手指的触发的事件")])])])]),v._v(" "),_("h3",{attrs:{id:"性能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#性能"}},[v._v("#")]),v._v(" 性能")]),v._v(" "),_("p",[v._v("当我们删除节点的时候，没有删除节点上的事件，就有可能引起内存问题。")]),v._v(" "),_("p",[v._v("所以及时移除节点事件，"),_("code",[v._v("remove")]),v._v("或者"),_("code",[v._v(".onclick = null")])]),v._v(" "),_("h2",{attrs:{id:"模拟事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#模拟事件"}},[v._v("#")]),v._v(" 模拟事件")]),v._v(" "),_("p",[v._v("和发布订阅类似思想，我们可能想要自定义一个事件，可能和"),_("code",[v._v("dom")]),v._v("无关，需要自己手动触发的。")]),v._v(" "),_("p",[v._v("而这里提到的模拟事件，指的是 **自定义DOM事件，也就是原生支持的事件。**比如说自定义"),_("code",[v._v("click")]),v._v("事件。")]),v._v(" "),_("p",[v._v("这样的自定义方式对我们的意义不大，因为个人理解是针对浏览器厂商的。")])])}),[],!1,null,null,null);t.default=a.exports}}]);