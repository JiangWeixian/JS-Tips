(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{299:function(v,e,_){"use strict";_.r(e);var t=_(0),o=Object(t.a)({},(function(){var v=this,e=v.$createElement,_=v._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"vue-vuex"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#vue-vuex"}},[v._v("#")]),v._v(" Vue - vuex")]),v._v(" "),_("blockquote",[_("p",[v._v("相比于怎么用；为什么使用可能才是你比较关心的问题")])]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#vue---vuex"}},[v._v("Vue - vuex")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#vue---%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"}},[_("strong",[_("code",[v._v("Vue")]),v._v(" - 状态管理")])]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E4%B8%8D%E4%BD%BF%E7%94%A8vuex"}},[_("strong",[v._v("不使用"),_("code",[v._v("vuex")])])])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8vuex"}},[_("strong",[v._v("使用"),_("code",[v._v("vuex")])])])])])]),v._v(" "),_("li",[_("a",{attrs:{href:"#vuex%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3"}},[_("code",[v._v("vuex")]),v._v("设计思想")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#%E9%93%BE%E6%8E%A5"}},[_("strong",[v._v("链接")])])])])])]),v._v(" "),_("h2",{attrs:{id:"vue-状态管理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#vue-状态管理"}},[v._v("#")]),v._v(" "),_("strong",[_("code",[v._v("Vue")]),v._v(" - 状态管理")])]),v._v(" "),_("blockquote",[_("p",[v._v("vuex公共状态关系")])]),v._v(" "),_("p",[v._v("这可能是你见到的最直接的答案，但是很抽象。因为对于"),_("code",[v._v("vue")]),v._v("来说可以实现 "),_("strong",[v._v("父子类通信以及兄弟节点之间的通信(通过传递到共有的父类上，然后订阅这部分共有数据即可)")]),v._v("，如何实现见"),_("a",{attrs:{href:"https://github.com/chenbin92/blog/issues/1",target:"_blank",rel:"noopener noreferrer"}},[v._v("Vue-组件通信"),_("OutboundLink")],1),v._v("。")]),v._v(" "),_("p",[v._v("甚至可以说"),_("code",[v._v("vue-router")]),v._v("页面跳转，页面之间的数据传递也可以由一个父类进行控制。")]),v._v(" "),_("p",[v._v("可以发现，不通过"),_("code",[v._v("vuex")]),v._v("也能够实现共同状态管理。"),_("strong",[v._v("所以"),_("code",[v._v("vuex")]),v._v("进行公共状态管理的回答不够准确。")])]),v._v(" "),_("h3",{attrs:{id:"不使用vuex"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#不使用vuex"}},[v._v("#")]),v._v(" "),_("strong",[v._v("不使用"),_("code",[v._v("vuex")])])]),v._v(" "),_("p",[v._v("不使用"),_("code",[v._v("vuex")]),v._v("的情况相对来说更好举例：")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("如果组件专注于"),_("code",[v._v("UI")]),v._v("层的话，"),_("strong",[v._v("显然我们不需要"),_("code",[v._v("vuex")])])])]),v._v(" "),_("li",[_("p",[v._v("如果页面数据来自服务器，一个页面地址对应一个状态，那么 "),_("strong",[v._v("我们不需要"),_("code",[v._v("vuex")])])]),v._v(" "),_("blockquote",[_("p",[v._v("通常做法是父类获取数据，来渲染到不同子类上")])])]),v._v(" "),_("li",[_("p",[v._v("如果页面解构简单，就像是"),_("a",{attrs:{href:"#vue---%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"}},[_("strong",[_("code",[v._v("Vue")]),v._v(" - 状态管理")])]),v._v("里面提到的通信情况，其实并没有涉及层级超过1个的组件通信。"),_("strong",[v._v("此时也不需要"),_("code",[v._v("vuex")]),v._v("进行控制")])]),v._v(" "),_("blockquote",[_("p",[v._v("也就是说子类到父类，数据传递层级只有1；两个兄弟节点的通信，也只是将兄弟节点数据传递给共有的父类，然后父类通过"),_("code",[v._v("props")]),v._v("进行数据传递。")])])])]),v._v(" "),_("p",[v._v("当然你也可以使用，我们 "),_("strong",[v._v("不使用的目的是为了让页面体积更小。")])]),v._v(" "),_("h3",{attrs:{id:"使用vuex"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用vuex"}},[v._v("#")]),v._v(" "),_("strong",[v._v("使用"),_("code",[v._v("vuex")])])]),v._v(" "),_("blockquote",[_("p",[v._v("什么情况下适合"),_("code",[v._v("vuex")]),v._v("使用；vuex公共状态关系依旧是最为明显好处")])]),v._v(" "),_("p",[v._v("使用"),_("code",[v._v("vuex")]),v._v("那肯定是因为它给我们带来了好处。设想以下场景：")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("多层级嵌套 - 父类嵌套子类，子类同时又嵌套一个子子类。那么子子类传递到父类，如果是"),_("code",[v._v("on emit")]),v._v("方法，那么就会出现 "),_("strong",[v._v("子子类emit子类，子类emit父类这样的方式进行数据一层层传递。")]),v._v(" 显然 "),_("strong",[v._v("此时有"),_("code",[v._v("vuex")]),v._v("会更为合理一些")]),v._v("，公共数据管理的好吃就比较明显了。")])]),v._v(" "),_("li",[_("p",[v._v("减少请求 - 存在向服务器发送请求的情况，以我仿写网易云音乐的工程为例子，获取用户歌单数据，用户渲染歌单数据部分。这部分数据在多个页面中使用。")]),v._v(" "),_("blockquote",[_("p",[v._v("对于不太复杂的情况，例如父类获取数据，传递给子类。此时简单的"),_("code",[v._v("props")]),v._v("就可以实现。")])]),v._v(" "),_("blockquote",[_("p",[v._v("但是 "),_("strong",[v._v("多级别嵌套情况出现之后")]),v._v("，除了"),_("code",[v._v("vuex")]),v._v("带来的共有数据管理利于组件之间数据传递之外。我们同样也避免了相同数据的服务器请求。")])])]),v._v(" "),_("li",[_("p",[v._v("数据同步 - "),_("code",[v._v("vuex")]),v._v("数据是同步，改变同样触发监听该部分数据的组件")])])]),v._v(" "),_("h2",{attrs:{id:"vuex设计思想"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#vuex设计思想"}},[v._v("#")]),v._v(" "),_("code",[v._v("vuex")]),v._v("设计思想")]),v._v(" "),_("blockquote",[_("p",[v._v("为啥设计为"),_("code",[v._v("state action mutation getters")])])]),v._v(" "),_("p",[v._v("其实"),_("code",[v._v("state action...")]),v._v("等都有对应的"),_("code",[v._v("mapState mapAction")]),v._v("的对应方法，因此在"),_("code",[v._v("vue")]),v._v("组件中如果想要获取"),_("code",[v._v("state")]),v._v("，完全可以通过"),_("code",[v._v("mapState")]),v._v("导入"),_("code",[v._v("state")]),v._v("，而不需要经过"),_("code",[v._v("mapGetter")]),v._v("。")]),v._v(" "),_("p",[_("strong",[v._v("那么就会出现一个问题，为啥出现除了"),_("code",[v._v("state")]),v._v("之外的几个接口函数。")])]),v._v(" "),_("p",[_("code",[v._v("vuex")]),v._v("约定俗成的概念是，"),_("code",[v._v("state")]),v._v("的改变是通过"),_("code",[v._v("mutation")]),v._v("触发，"),_("code",[v._v("mutation")]),v._v("是同步的修改"),_("code",[v._v("state")]),v._v("操作，而"),_("code",[v._v("actions")]),v._v("则是异步的修改"),_("code",[v._v("state")]),v._v("操作。")]),v._v(" "),_("blockquote",[_("p",[v._v("在适合使用"),_("code",[v._v("vuex")]),v._v("的工程前提下")])]),v._v(" "),_("ol",[_("li",[_("p",[_("code",[v._v("mutations or actions")]),v._v("作用相对好理解")]),v._v(" "),_("blockquote",[_("p",[v._v("("),_("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/state-management.html#%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E8%B5%B7%E6%AD%A5%E4%BD%BF%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[v._v("文档"),_("OutboundLink")],1),v._v("中有提到)接着我们继续延伸约定，组件不允许直接修改属于 store 实例的 state，而应执行 action 来分发 (dispatch) 事件通知 store 去改变，我们最终达成了 Flux 架构。这样约定的好处是，我们能够记录所有 store 中发生的 state 改变，同时实现能做到记录变更 (mutation)、保存状态快照、历史回滚/时光旅行的先进的调试工具。")])]),v._v(" "),_("blockquote",[_("p",[v._v("而异步和同步的操作写在两个地方也是出于操作分类的目的。因为虽然"),_("code",[v._v("actions")]),v._v("属于异步，但是"),_("code",[v._v("actions")]),v._v("中修改"),_("code",[v._v("state")]),v._v("操作还是借由触犯"),_("code",[v._v("mutation")]),v._v("实现。")])])]),v._v(" "),_("li",[_("p",[_("code",[v._v("getters")]),v._v("类比组件中"),_("code",[v._v("computed")]),v._v(" - 一部分由于"),_("code",[v._v("vuex")]),v._v("是全局的，"),_("code",[v._v("getters")]),v._v("也是全局的；另一部分，出于 "),_("strong",[v._v("复用")]),v._v(" 计算"),_("code",[v._v("state")]),v._v("的目的以及"),_("code",[v._v("state")]),v._v("需要经过计算处理，所以我们会将一些属性放在"),_("code",[v._v("getters")]),v._v("进行获取。")]),v._v(" "),_("blockquote",[_("p",[v._v("所以可以得到结论，如果你不需要"),_("code",[v._v("computed state")]),v._v("，自然可以不通过"),_("code",[v._v("state")]),v._v("获取数据。而是直接通过"),_("code",[v._v("mapState")]),v._v("将数据导入组件")])])])]),v._v(" "),_("h2",{attrs:{id:"链接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#链接"}},[v._v("#")]),v._v(" "),_("strong",[v._v("链接")])]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://juejin.im/post/592702c12f301e006c2a28a0",target:"_blank",rel:"noopener noreferrer"}},[v._v("父子间通信于"),_("code",[v._v("vuex")]),_("OutboundLink")],1)]),v._v(" "),_("li",[_("a",{attrs:{href:"https://www.cnblogs.com/forzhaokang/p/8317987.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("如果不使用"),_("code",[v._v("vuex")]),v._v(" - 复杂组件通信状态"),_("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=o.exports}}]);