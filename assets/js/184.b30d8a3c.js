(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{520:function(t,a,e){"use strict";e.r(a);var n=e(0),o=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"css-动画"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-动画"}},[t._v("#")]),t._v(" CSS - 动画")]),t._v(" "),e("blockquote",[e("p",[t._v("实现动画的几种方式：JS版本的我也放在这里的了")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#css---%E5%8A%A8%E7%94%BB"}},[t._v("CSS - 动画")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E5%8A%A8%E7%94%BB%E7%9B%B8%E5%85%B3%E7%9A%84%E5%B1%9E%E6%80%A7"}},[t._v("动画相关的属性")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#timefunction"}},[t._v("timefunction")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#transitiontransform"}},[t._v("transition/transform")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#animationkeyframs"}},[t._v("animation/keyframs")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#requestanimationframe"}},[t._v("requestAnimationFrame")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"}},[t._v("参考链接")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E9%A2%98%E5%A4%96%E8%AF%9D---%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%98%E4%BA%8Esettimeout"}},[t._v("题外话 - 为什么优于settimeout")])])])])])])]),t._v(" "),e("h2",{attrs:{id:"动画相关的属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动画相关的属性"}},[t._v("#")]),t._v(" 动画相关的属性")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("transition/transform")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("transform")]),t._v("为内置动画名 - 作为"),e("code",[t._v("name")])]),t._v(" "),e("li",[e("code",[t._v("transition")]),t._v(" - name/duration/time-func/delay，其中"),e("code",[t._v("name")]),t._v("还可以是一些css属性。")]),t._v(" "),e("li",[t._v("特点 - 监听"),e("code",[t._v("name")]),t._v("是否变化，变化与否都会触发动画，"),e("code",[t._v("backward")]),t._v("是"),e("code",[t._v("forward")]),t._v("相反方向。")])])]),t._v(" "),e("li",[e("code",[t._v("animation/keyframs")]),t._v(" "),e("ul",[e("li",[t._v("默认情况下，执行一次闪回到最初状态")]),t._v(" "),e("li",[t._v("格式为"),e("code",[t._v("name/duration/time-func/delay/iteration-count/animation-direction")])])])]),t._v(" "),e("li",[e("code",[t._v("requestAnimationFrame()")]),t._v(" - 性能优于"),e("code",[t._v("settimeout")])])]),t._v(" "),e("h2",{attrs:{id:"timefunction"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#timefunction"}},[t._v("#")]),t._v(" timefunction")]),t._v(" "),e("blockquote",[e("p",[t._v("CSS动画属性一部分：限制元素属性如何变化。")])]),t._v(" "),e("p",[t._v("内置的属性变化函数比较少。但是"),e("code",[t._v("CSS")]),t._v("支持"),e("a",{attrs:{href:"https://www.w3schools.com/cssref/func_cubic-bezier.asp",target:"_blank",rel:"noopener noreferrer"}},[t._v("cubic-bezier()"),e("OutboundLink")],1),t._v("作为"),e("code",[t._v("time-func")]),t._v("。其实"),e("code",[t._v("linear&cubic-bezier")]),t._v("都可以归结为"),e("code",[t._v("cubic-bezier")]),t._v("一类。")]),t._v(" "),e("p",[t._v("在"),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/transition",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档-适用animation&transition"),e("OutboundLink")],1),t._v("中还有"),e("code",[t._v("step&frames")]),t._v("两种"),e("code",[t._v("time-function")]),t._v("类型。有时间可以深入研究一下。")]),t._v(" "),e("h2",{attrs:{id:"transition-transform"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#transition-transform"}},[t._v("#")]),t._v(" transition/transform")]),t._v(" "),e("blockquote",[e("p",[t._v("监听"),e("code",[t._v("name")]),t._v("变化，如果变化了就触发动画；"),e("strong",[t._v("因此能够实现保持的动画，但是没有办法"),e("code",[t._v("only css")]),t._v("情况下实现循环的动画。")])])]),t._v(" "),e("p",[e("strong",[t._v("Q&A1 - 重点在于这个name")]),e("code",[t._v("/duration/time-func/delay")]),t._v("都很好理解:")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("如果是"),e("code",[t._v("css")]),t._v("普通属性，则"),e("code",[t._v("transition: width duration time-func delay")]),t._v("。"),e("strong",[t._v("然后通过其余方式改变"),e("code",[t._v("width")])])]),t._v(" "),e("blockquote",[e("p",[t._v("例如设置"),e("code",[t._v("box-transition")]),t._v("为上述，但是在"),e("code",[t._v("box.class")]),t._v("(新添加的class)中改变"),e("code",[t._v("width")]),t._v("。那么就可以监听到"),e("code",[t._v("width")]),t._v("变化，然后触发动画，如果"),e("code",[t._v("class")]),t._v("一直保持，那么就会保持动画最终状态。如果"),e("code",[t._v("class")]),t._v("中途消失(或者其他方式改变了"),e("code",[t._v("width")]),t._v(")，那么动画就会再一次触发。")])])]),t._v(" "),e("li",[e("p",[t._v("如果是"),e("code",[t._v("transform")]),t._v("，则"),e("code",[t._v("transition: transform duration time-func delay")]),t._v("，代表监听"),e("code",[t._v("transform")]),t._v("的变化。")]),t._v(" "),e("blockquote",[e("p",[t._v("动画触发条件和上面类似，但是"),e("code",[t._v("transform: rotate(xx)")]),t._v("之类的。")])]),t._v(" "),e("blockquote",[e("p",[t._v("同时transform可以在元素上单独设置")])])])]),t._v(" "),e("p",[t._v("前两个说明的例子")]),t._v(" "),e("ul",[e("li",[t._v("如果是"),e("code",[t._v("all")]),t._v("，代表监听所有属性")])]),t._v(" "),e("p",[e("strong",[t._v("Q&A2 - 多个动画")])]),t._v(" "),e("p",[t._v("以"),e("code",[t._v("name/duration/time-func/delay")]),t._v("为一组动画，例如"),e("code",[t._v("name1 duration time-func delay, name2 duration time-func delay,...")])]),t._v(" "),e("h2",{attrs:{id:"animation-keyframs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#animation-keyframs"}},[t._v("#")]),t._v(" animation/keyframs")]),t._v(" "),e("blockquote",[e("p",[t._v("格式为"),e("code",[t._v("name/duration/time-func/delay/iteration-count/animation-direction")]),t._v("。和"),e("a",{attrs:{href:"#transitiontransform"}},[t._v("transition/transform")]),t._v("相比多了后面两个属性。")])]),t._v(" "),e("blockquote",[e("p",[t._v("之后还有属性为"),e("code",[t._v("animation-fill-mode/play-state")]),t._v("。见"),e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2014/02/css_transition_and_animation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰CSS动画"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("通过比较"),e("a",{attrs:{href:"#transitiontransform"}},[t._v("transition/transform")]),t._v("和"),e("a",{attrs:{href:"#animationkeyframs"}},[t._v("animation/keyframs")]),t._v("进行说明。先说结论：")]),t._v(" "),e("ul",[e("li",[t._v("触发时机 - "),e("code",[t._v("animation")]),t._v("动画立刻触发，"),e("code",[t._v("transition")]),t._v("动画需要监听属性")]),t._v(" "),e("li",[t._v("动画次数 - "),e("code",[t._v("transition")]),t._v("只要属性保持不变就不会触发动画，所以默认 "),e("strong",[t._v("不支持inf动画(除非JS手段改变属性)")]),t._v("；"),e("code",[t._v("animation")]),t._v("可以无限执行动画。")])]),t._v(" "),e("p",[e("strong",[t._v("Q&A3 -")]),t._v(" "),e("code",[t._v("animation")]),t._v("动画特点")]),t._v(" "),e("p",[t._v("和"),e("a",{attrs:{href:"#transitiontransform"}},[t._v("transition/transform")]),t._v("不同，只要元素设置了"),e("code",[t._v("animation")]),t._v("就会触动。而不像"),e("a",{attrs:{href:"#transitiontransform"}},[t._v("transition/transform")]),t._v(" "),e("strong",[t._v("监听某种变化之后触发")])]),t._v(" "),e("p",[e("strong",[t._v("Q&A4 - name")]),t._v(" 和"),e("code",[t._v("@keyframes")]),t._v("密切相关(注意浏览器的兼容问题)")]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("@keyframes somename "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    百分比 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    另一个百分比 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意没有冒号以及分号")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以及是百分比数值，所以必须带上百分号")]),t._v("\n")])])]),e("ul",[e("li",[e("strong",[t._v("百分比意味着在"),e("code",[t._v("duration")]),t._v("哪个事件触发")])]),t._v(" "),e("li",[e("code",[t._v("somename")]),t._v("也就是用于设置"),e("code",[t._v("animation: name")]),t._v("，写在"),e("code",[t._v("name")]),t._v("部分。"),e("strong",[t._v("只能用于animation但是不能用于transition")])]),t._v(" "),e("li",[t._v("在"),e("code",[t._v("百分比: {}")]),t._v("中可以设置多个属性(包括"),e("code",[t._v("transform")]),t._v(")，不像"),e("code",[t._v("transition")]),t._v("只能够监听一个属性")])]),t._v(" "),e("p",[t._v("例子见"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/CSS/HTML/css-animation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("css-animation.html(ele-animation-normal)"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("strong",[t._v("Q&A5 -")]),t._v(" "),e("code",[t._v("iteration-count/animation-direction")]),t._v("属性特点。")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("iteration-count")]),t._v(" - 代表动画执行次数"),e("code",[t._v("n|infinite")]),t._v("。而且 "),e("strong",[t._v("新的一次动画执行都是从头开始")]),t._v(" (例如动画执行到末尾阶段，期间依照"),e("code",[t._v("time-function")]),t._v("变换参数，从头开始意味着属性闪回到最初阶段，然后再执行动画)")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("animation-direction")]),t._v(" - "),e("code",[t._v("nomal|alternate")])]),t._v(" "),e("blockquote",[e("p",[t._v("很明显是动画执行的方向。在"),e("code",[t._v("iteration-count")]),t._v("知道，新的动画执行时会闪回到最初阶段。"),e("strong",[t._v("现在可以控制回退时候的动画执行特性，也就是"),e("code",[t._v("alternate")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("可配合上一个"),e("code",[t._v("iteration-count")]),t._v("使用。因为无论是动画执行或者回退都是要消耗"),e("code",[t._v("iteration-count")]),t._v("执行次数，执行一次减1。"),e("strong",[t._v("所以如果设置了"),e("code",[t._v("alternate")]),t._v("，动画次数却没有大于2，是没有办法执行下去的")]),t._v("。见"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/CSS/HTML/css-animation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("css-animation.html(ele-animation-alternate)"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("animation-fill-mode")])]),t._v(" "),e("blockquote",[e("p",[t._v("除了forward其余都不是很重要")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("none")]),t._v("默认值")]),t._v(" "),e("li",[e("code",[t._v("backward")]),t._v(" "),e("strong",[t._v("回到动画第一帧情况，一般情况下就是初始状态")]),t._v(" 见"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/CSS/HTML/css-animation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("css-animation.html(ele-animation-mode--backward)"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("code",[t._v("forward")]),t._v("动画执行之后保持。"),e("strong",[t._v("大概是这个属性最为重要的一个")])]),t._v(" "),e("li",[e("code",[t._v("both")])])])])]),t._v(" "),e("h2",{attrs:{id:"requestanimationframe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe"}},[t._v("#")]),t._v(" requestAnimationFrame")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN-requestAnimationFrame"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("实现动画关键在于自身调用自身。")])]),t._v(" "),e("div",{staticClass:"language-JavaScript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("animate")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// somedom modify")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aniamte"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nrequestAnimationFrame（animate）\n")])])]),e("p",[e("strong",[t._v("Q&A6 -")]),t._v(" 如何取消动画？")]),t._v(" "),e("p",[t._v("和"),e("code",[t._v("settimeout")]),t._v("一样，同样有一个"),e("code",[t._v("ID")]),t._v("返回，例如"),e("code",[t._v("id = requestAnimationFrame(animate)")]),t._v("。可以通过"),e("code",[t._v("cancelAnimationFrame(myReq)")]),t._v("来取消动画。")]),t._v(" "),e("h3",{attrs:{id:"参考链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://juejin.im/entry/5ae844ec518825673a205855",target:"_blank",rel:"noopener noreferrer"}},[t._v("requestAnimationFrame(animate)"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"题外话-为什么优于settimeout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#题外话-为什么优于settimeout"}},[t._v("#")]),t._v(" 题外话 - 为什么优于settimeout")]),t._v(" "),e("blockquote",[e("p",[t._v("我们考虑的是动画性能这部分；(不过想想性能更好是应该的，毕竟是为了动画做的优化函数)")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("可见性优化 - "),e("code",[t._v("settimeout")]),t._v("是会加入事件队列，其实是交给"),e("code",[t._v("JS")]),t._v("来做，意味着一旦开始无论页面是否可见(打开或者开启其他标签页)，"),e("code",[t._v("JavaScript")]),t._v("都会在执行，"),e("strong",[e("code",[t._v("requestAnimationFrame")])]),t._v(" 要求只绘制可见性动画。所以神奇的是 "),e("strong",[t._v("requestAnimationFrame回调函数的dom元素，它是知道哪些是可见的或者是不可见的。")])])]),t._v(" "),e("li",[e("p",[t._v("重绘或者重排优化 - "),e("strong",[e("code",[t._v("requestAnimationFrame")]),t._v("回调函数的"),e("code",[t._v("dom")]),t._v("元素")]),t._v(" 会进行一次性重排重绘。")])])])])}),[],!1,null,null,null);a.default=o.exports}}]);