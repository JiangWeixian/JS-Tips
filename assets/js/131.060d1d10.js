(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{475:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"漫谈react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#漫谈react"}},[t._v("#")]),t._v(" 漫谈React")]),t._v(" "),a("blockquote",[a("p",[t._v("与CSS结合的最佳实践；性能优化")])]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#前言"}},[t._v("前言")])]),a("li",[a("a",{attrs:{href:"#event-system"}},[t._v("Event System")])]),a("li",[a("a",{attrs:{href:"#几个概念"}},[t._v("几个概念")])]),a("li",[a("a",{attrs:{href:"#with-css-modules"}},[t._v("With CSS-Modules")])]),a("li",[a("a",{attrs:{href:"#commuication"}},[t._v("Commuication")])]),a("li",[a("a",{attrs:{href:"#hoc"}},[t._v("HOC")])]),a("li",[a("a",{attrs:{href:"#optimize-react"}},[t._v("Optimize React")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("知识点很多。")]),t._v(" "),a("h2",{attrs:{id:"event-system"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-system"}},[t._v("#")]),t._v(" Event System")]),t._v(" "),a("ol",[a("li",[t._v("React中事件不能等价与原生事件系统")])]),t._v(" "),a("blockquote",[a("p",[t._v("只是重写了其中部分，缺失的那部分只能够通过原生的方法添加")])]),t._v(" "),a("blockquote",[a("p",[t._v("而且只有冒泡模式，没有捕获方式")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("阻止事件冒泡")])]),t._v(" "),a("blockquote",[a("p",[t._v("如果是原生和"),a("code",[t._v("React")]),t._v("混用的情况，如果"),a("strong",[t._v("阻止了React事件冒泡不能够阻止原生事件冒泡。但是如果阻止了原生的，就一定会阻止"),a("code",[t._v("React")]),t._v("的")])])]),t._v(" "),a("h2",{attrs:{id:"几个概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#几个概念"}},[t._v("#")]),t._v(" 几个概念")]),t._v(" "),a("p",[t._v("什么时候受控模式？什么时候非受控模式？")]),t._v(" "),a("blockquote",[a("p",[t._v("无论是原生组件还是还是非原生组件。组件的数据是通过"),a("code",[t._v("state or props")]),t._v("进行控制的。而非受控的模式是通过"),a("strong",[t._v("原生"),a("code",[t._v("DOM")]),t._v("的方式进行控制的")])])]),t._v(" "),a("h2",{attrs:{id:"with-css-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#with-css-modules"}},[t._v("#")]),t._v(" With CSS-Modules")]),t._v(" "),a("p",[t._v("具体见"),a("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/React/React-CSSModules.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS-modules"),a("OutboundLink")],1),t._v("这部分的总结")]),t._v(" "),a("h2",{attrs:{id:"commuication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commuication"}},[t._v("#")]),t._v(" Commuication")]),t._v(" "),a("p",[t._v("父子通信是比较明白的。兄弟之间通信也能够实现。只要数据在父级处理然后分发就可以了。")]),t._v(" "),a("p",[a("strong",[t._v("但是如何实现层级比较深的组件通信：不是父子，也不是兄弟")])]),t._v(" "),a("p",[t._v("文中推荐了"),a("code",[t._v("events")]),t._v("通过"),a("code",[t._v("pub/sub")]),t._v("的方式。需要"),a("code",[t._v("events")]),t._v("这个"),a("code",[t._v("npm")]),t._v("包。"),a("strong",[t._v("并不十分推荐"),a("code",[t._v("context")]),t._v("这个属性。")])]),t._v(" "),a("h2",{attrs:{id:"hoc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hoc"}},[t._v("#")]),t._v(" HOC")]),t._v(" "),a("blockquote",[a("p",[t._v("HOC的作用需要好好研究一下")])]),t._v(" "),a("p",[t._v("有几个比较明显的作用")]),t._v(" "),a("ol",[a("li",[t._v("作为数据源（或者是作为代理层：指的是不直接让外部访问被包裹的组件）")])]),t._v(" "),a("blockquote",[a("p",[t._v("如果只是这种目的，可以不需要HOC。有点大材小用了。")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("控制被包裹组件渲染，通过新的组件进行包裹，新的组件有新的"),a("code",[t._v("state")]),t._v("。因此被包裹组件的渲染是由父类进行控制的")])]),t._v(" "),a("li",[a("p",[t._v("反向继承 - "),a("strong",[t._v("个人认为HOC最为重要的特点了！")])])])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("MyContainer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("WrappedComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("  \n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("extends")]),t._v(" WrappedComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("可以看到被返回的组件是继承的是"),a("code",[t._v("wrappedcomponent")]),t._v("。意味着再内部我们可以通过"),a("code",[t._v("wrappedComponent.state or .props")]),t._v("来访问到一些数据，从而对"),a("code",[t._v("wrappedcomponents")]),t._v("进行控制。")]),t._v(" "),a("h2",{attrs:{id:"optimize-react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optimize-react"}},[t._v("#")]),t._v(" Optimize React")]),t._v(" "),a("blockquote",[a("p",[t._v("优化React。其中有些实现可能不需要通过插件的方式了，集成为了现有的API。")])]),t._v(" "),a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),t._v(" - 如何利用"),a("code",[t._v("immer")]),t._v("对"),a("code",[t._v("props")]),t._v("进行修改需要好好思考。")])]),t._v(" "),a("p",[t._v("要记住一个原则就是：")]),t._v(" "),a("blockquote",[a("p",[t._v("JS中对象是引用类型的。对对象中数据的修改会反应到原始数据上。")])]),t._v(" "),a("p",[t._v("优化的方案有：")]),t._v(" "),a("ol",[a("li",[t._v("不要执行多次修改"),a("code",[t._v("state")]),t._v("，而是将其中的数据拿出来，然后修改完毕之后一次性的更新。"),a("strong",[t._v("这是由于每次修改"),a("code",[t._v("state")]),t._v("都会触发"),a("code",[t._v("render")])])])]),t._v(" "),a("p",[a("strong",[t._v("为了避免修改对象数据而导致父类数据被修改。")]),t._v(" 那么自然也会想到将原始数据深度拷贝一份，这样修改之后再再一次更新回去便可以了。但是这回导致一个问题：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("深度拷贝或者浅度拷贝都是性能是有消耗的，而且比较大")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("即使我们不考虑拷贝的问题")]),t._v("，因为现在可以通过"),a("code",[t._v("...")]),t._v("进行操作。从某种意义上来说可以解决大部分的问题了。")]),t._v(" "),a("blockquote",[a("p",[t._v("但是可能会导致的问题是，会复制全部的内容。"),a("strong",[t._v("可能我们期望的场景是：")]),t._v(" 只修改被修改的内容，不被修改的内容则保留。同时如果被修改的内容和之前的内容是一致的，则不需要进行复制。直接返回原先的对象就可以了。")])])])]),t._v(" "),a("p",[t._v("这可能就需要引入第三方库进行操作了，调研下来"),a("strong",[t._v("immer.js")]),t._v("这个库是比较好的。")]),t._v(" "),a("p",[a("strong",[t._v("一个建议，最好再项目一开始就定下来进行使用！")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("使用对象变量，如果我们给对象设置"),a("code",[t._v("props")]),t._v("为"),a("code",[t._v("<div style={ { width: 'xpx' } }></div>")]),t._v("，那么每次"),a("code",[t._v("render")]),t._v("之后"),a("code",[t._v("style")]),t._v("得到对象都应该是新创建的。性能消耗是比较大的。")])]),t._v(" "),a("blockquote",[a("p",[t._v("我们能进行的优化是，将{ width: 'xpx' }这部分数据保存为到一个变量里面。")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[a("code",[t._v("shouldcomponentupdate")]),t._v(" - 要学会使用这个钩子还是。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("is"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immutable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shouldComponentUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" thisProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" thisState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    nextState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    nextProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n      Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" nextState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thisState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" BaseComponent\n")])])]),a("p",[t._v("一个小技巧是，如果你是用了"),a("code",[t._v("immer")]),t._v("，你可以再新建组件的时候通过"),a("code",[t._v("class newcomponent extends BaseComponent")]),t._v("直接继承一个优化之后的组建。")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("immer")]),t._v("如何使用还是要进一步研究的。只是留坑简单说明。")])])]),t._v(" "),a("li",[a("p",[t._v("设置组件"),a("code",[t._v("key")])])]),t._v(" "),a("li",[a("p",[t._v("不要移动跨层级移动节点，如果需要这么做，宁愿创建两个阶段，设置隐藏和删除。因为对于"),a("code",[t._v("react")]),t._v("来说跨层级的移动是比较消耗性能的。")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);