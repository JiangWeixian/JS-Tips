(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{513:function(e,t,_){"use strict";_.r(t);var v=_(0),s=Object(v.a)({},(function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"模块"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#模块"}},[e._v("#")]),e._v(" 模块")]),e._v(" "),_("blockquote",[_("p",[e._v("es5&es6")])]),e._v(" "),_("h3",{attrs:{id:"es5"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#es5"}},[e._v("#")]),e._v(" es5")]),e._v(" "),_("p",[e._v("还没有"),_("code",[e._v("export defalut")]),e._v("之间的故事。")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2012/11/require_js.html?bsh_bid=230697246",target:"_blank",rel:"noopener noreferrer"}},[e._v("reuqire.js"),_("OutboundLink")],1)])]),e._v(" "),_("p",[e._v("网页加载"),_("code",[e._v("js")]),e._v("文件，一般是写在"),_("code",[e._v("body")]),e._v("标签末端。保证渲染完毕之后再加载"),_("code",[e._v("js")]),e._v("文件。")]),e._v(" "),_("p",[e._v("另外的有些是写在"),_("code",[e._v("header")]),e._v("，可能是为了一些设置。")]),e._v(" "),_("p",[e._v("多个加载"),_("code",[e._v("js")]),e._v("文件可能会出现的问题")]),e._v(" "),_("ul",[_("li",[e._v("script标签过多有时间上的损耗")]),e._v(" "),_("li",[e._v("js文件之前有依赖关系，因此有加载顺序")])]),e._v(" "),_("h3",{attrs:{id:"异步加载问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#异步加载问题"}},[e._v("#")]),e._v(" 异步加载问题")]),e._v(" "),_("p",[e._v("这是打包优化的关键。")]),e._v(" "),_("p",[e._v("我们的确将所有文件都打包了，但是并不一定都"),_("code",[e._v("require")]),e._v("进来了。")]),e._v(" "),_("p",[e._v("只有当可能我们进行了某些浏览器操作，点击按钮之类的。需要额外的js文件，才会请求，插入到浏览器中。属于浏览器性能的优化。")]),e._v(" "),_("h3",{attrs:{id:"require-js"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#require-js"}},[e._v("#")]),e._v(" require.js")]),e._v(" "),_("ul",[_("li",[_("p",[e._v("如何解决依赖性？")]),e._v(" "),_("p",[_("code",[e._v("require.js")]),e._v("接收两个参数，第一个为模块列表，另外一个是回调函数。")]),e._v(" "),_("div",{staticClass:"language-javascript extra-class"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[e._v("    "),_("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),_("span",{pre:!0,attrs:{class:"token string"}},[e._v("'jquery'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v("'underscore'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v("'backbone'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),_("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("$"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" _"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" Backbone")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\n　　　　"),_("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// some code here")]),e._v("\n\n　　"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),_("p",[e._v("异步加载模块列表，顺序就代表了依赖性。\n可以设置"),_("code",[e._v("config")]),e._v("指定模块路径。")])]),e._v(" "),_("li",[_("p",[e._v("如何定义模块？")]),e._v(" "),_("p",[e._v("和"),_("code",[e._v("es6")]),e._v("不同，"),_("code",[e._v("require.js")]),e._v("定义模块必须定义在"),_("code",[e._v("define")]),e._v("函数内。")]),e._v(" "),_("p",[e._v("和"),_("code",[e._v("require")]),e._v("函数一样，"),_("code",[e._v("define")]),e._v("函数同样也可以加载模块。")])]),e._v(" "),_("li",[_("p",[e._v("解决"),_("code",[e._v("require.js")]),e._v("的重复加载问题")]),e._v(" "),_("p",[e._v("没有用过"),_("code",[e._v("require.js")]),e._v("，说一下关于"),_("code",[e._v("require.js")]),e._v("重复加载问题。")]),e._v(" "),_("p",[e._v("当a和b都需要c模块，可能会重复引入c模块。")]),e._v(" "),_("p",[e._v("可以选择的做法是，公用模块可以在某个"),_("code",[e._v("global")]),e._v("文件中引入。其他文件中，进一步的可以通过"),_("code",[e._v("require.js")]),e._v("的"),_("code",[e._v("config")]),e._v("排除某些模块的引入。")])])]),e._v(" "),_("h3",{attrs:{id:"webpack"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[e._v("#")]),e._v(" webpack")]),e._v(" "),_("p",[e._v("可以打包js css文件，功能强大。")]),e._v(" "),_("p",[e._v("就理解上来说，比"),_("code",[e._v("require.js")]),e._v("难，毕竟功能比较多。所以以后每一个都要强迫自己使用"),_("code",[e._v("webpack")]),e._v("。先给出相关连接：")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"http://taobaofed.org/blog/2016/09/09/webpack-flow/",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack配置模块分析"),_("OutboundLink")],1)])]),e._v(" "),_("p",[e._v("webpack分为"),_("code",[e._v("dev")]),e._v("模式，和"),_("code",[e._v("prodoction")]),e._v("模式。两者又共同部分和不同部分。基本分为几大模块：")]),e._v(" "),_("ul",[_("li",[e._v("entry - 入口文件，通过解析入口文件一步步递归依赖打包")]),e._v(" "),_("li",[e._v("output - 输出")]),e._v(" "),_("li",[e._v("loader - 解析同步使用loader进行转换，比如css预处理器或者es6")]),e._v(" "),_("li",[e._v("plugins - 应该是打包最终步骤，非"),_("code",[e._v("dev")]),e._v("模式配置比较多。")])]),e._v(" "),_("p",[e._v("js部分打包")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/32093510",target:"_blank",rel:"noopener noreferrer"}},[e._v("js打包参考地址"),_("OutboundLink")],1)]),e._v(" "),_("li",[_("a",{attrs:{href:"https://segmentfault.com/a/1190000006808865",target:"_blank",rel:"noopener noreferrer"}},[e._v("commodplugins参数解析"),_("OutboundLink")],1),e._v(" - 对参数设置有更详细的解析。")]),e._v(" "),_("li",[_("a",{attrs:{href:"http://www.voidcn.com/article/p-oznmssmx-boa.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("如果minichunks是inf的话"),_("OutboundLink")],1)])]),e._v(" "),_("p",[e._v("打包第三方和自己的js文件。主文件输出一个类如"),_("code",[e._v("main.js")]),e._v("或者"),_("code",[e._v("app.js")]),e._v("文件。里面可能有自己的代码或者引用第三方代码。")]),e._v(" "),_("p",[e._v("打包第三方（"),_("code",[e._v("commonchunkplugins")]),e._v("）要经过三个步骤：")]),e._v(" "),_("ol",[_("li",[e._v("打包所有第三方依赖")]),e._v(" "),_("li",[e._v("分离其中基础或者引用多次的依赖文件")])]),e._v(" "),_("p",[e._v("一些细节上参数解惑：")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("minichunks")]),e._v(": 指的的包的引用次数，如果大于"),_("code",[e._v("minichunks")]),e._v("就会被打包到一个文件中。"),_("code",[e._v("inf")]),e._v("的目的就是为了，打包"),_("code",[e._v("webpack")]),e._v("或者"),_("code",[e._v("runtime")]),e._v("阶段的代码。")]),e._v(" "),_("li",[_("code",[e._v("chunks")]),e._v(": 如果之前使用"),_("code",[e._v("commonchunkplugins")]),e._v("打包了文件，那么这里设置打包好的文件名数组。那么这个"),_("code",[e._v("commonchunkplugins")]),e._v("就会从打包好里面文件进一步筛选，筛选出其中公用第三方文件。")])])])}),[],!1,null,null,null);t.default=s.exports}}]);