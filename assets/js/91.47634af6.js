(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{392:function(a,t,r){"use strict";r.r(t);var s=r(0),v=Object(s.a)({},function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"变量、作用域和内存"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#变量、作用域和内存","aria-hidden":"true"}},[a._v("#")]),a._v(" 变量、作用域和内存")]),a._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%86%85%E5%AD%98"}},[a._v("变量、作用域和内存")]),a._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"}},[a._v("基本类型和引用类型")])]),a._v(" "),r("li",[r("a",{attrs:{href:"#%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[a._v("作用域")]),a._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#%E6%9F%A5%E6%89%BE%E5%8F%98%E9%87%8F"}},[a._v("查找变量")])])])]),a._v(" "),r("li",[r("a",{attrs:{href:"#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6---gc"}},[a._v("垃圾回收 - GC")]),a._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4"}},[a._v("标记清除")])]),a._v(" "),r("li",[r("a",{attrs:{href:"#%E6%A0%87%E8%AE%B0%E8%AE%A1%E6%95%B0"}},[a._v("标记计数")])]),a._v(" "),r("li",[r("a",{attrs:{href:"#%E9%87%8A%E6%94%BE%E5%86%85%E5%AD%98"}},[a._v("释放内存")])])])]),a._v(" "),r("li",[r("a",{attrs:{href:"#chrome%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90"}},[a._v("Chrome与内存分析")])])])])]),a._v(" "),r("h2",{attrs:{id:"基本类型和引用类型"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基本类型和引用类型","aria-hidden":"true"}},[a._v("#")]),a._v(" 基本类型和引用类型")]),a._v(" "),r("p",[a._v("例子见"),r("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/Grammar/JS%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%B7%AE%E5%BC%82.md",target:"_blank",rel:"noopener noreferrer"}},[a._v("这里"),r("OutboundLink")],1),a._v(" - 特别是作为参数传递的时候。")]),a._v(" "),r("div",{staticClass:"language-JavaScript extra-class"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" a "),r("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[a._v("'a'")]),a._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" b "),r("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" a\na"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("name "),r("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[a._v("'b'")]),a._v("\nconsole"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nconsole"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("b"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),r("p",[a._v("可以发现"),r("code",[a._v("b")]),a._v("中"),r("code",[a._v("name")]),a._v("是被修改的。")]),a._v(" "),r("h2",{attrs:{id:"作用域"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#作用域","aria-hidden":"true"}},[a._v("#")]),a._v(" 作用域")]),a._v(" "),r("ul",[r("li",[a._v("执行作用域 - "),r("code",[a._v("this")]),a._v("在函数执行的时候指定")]),a._v(" "),r("li",[r("code",[a._v("es6")]),a._v(" - 如果使用"),r("code",[a._v("let or const")]),a._v("那么就是在函数声明的时候使用。")])]),a._v(" "),r("h3",{attrs:{id:"查找变量"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#查找变量","aria-hidden":"true"}},[a._v("#")]),a._v(" 查找变量")]),a._v(" "),r("p",[a._v("从下往上面寻找。"),r("strong",[a._v("找到了就停止")])]),a._v(" "),r("h2",{attrs:{id:"垃圾回收-gc"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#垃圾回收-gc","aria-hidden":"true"}},[a._v("#")]),a._v(" 垃圾回收 - GC")]),a._v(" "),r("p",[a._v("有两种方式决定垃圾是否被回收：标记清除和标记计数。")]),a._v(" "),r("p",[a._v("垃圾回收是为了优化内存，清除不必要的内存使用。")]),a._v(" "),r("h3",{attrs:{id:"标记清除"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#标记清除","aria-hidden":"true"}},[a._v("#")]),a._v(" 标记清除")]),a._v(" "),r("p",[a._v("有两个标记，分别标记为 "),r("strong",[a._v("离开和进入环境")])]),a._v(" "),r("ul",[r("li",[a._v("进入环境意味着分配内存")]),a._v(" "),r("li",[a._v("离开环境意味着释放")])]),a._v(" "),r("p",[a._v("什么能够标记为 "),r("strong",[a._v("进入环境")])]),a._v(" "),r("ol",[r("li",[a._v("声明变量意味着进入 - 无论是"),r("code",[a._v("var a = xx or var a = function")])])]),a._v(" "),r("p",[a._v("(以下理解可能有误)")]),a._v(" "),r("p",[a._v("但是"),r("code",[a._v("fuction a () {}")]),a._v("要特别注意，当"),r("code",[a._v("a")]),a._v("执行的时候才会标记为进入环境，才会分配内存，以及函数内部变量内存。函数执行结束之后，就会被标标记为离开。如果内部有返回值，被复制那个还是有内存分配的。")]),a._v(" "),r("h3",{attrs:{id:"标记计数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#标记计数","aria-hidden":"true"}},[a._v("#")]),a._v(" 标记计数")]),a._v(" "),r("p",[a._v("已经不被采用的方法，但是还是要注意不要循环引用一个对象。")]),a._v(" "),r("h3",{attrs:{id:"释放内存"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#释放内存","aria-hidden":"true"}},[a._v("#")]),a._v(" 释放内存")]),a._v(" "),r("p",[a._v("除了那些函数自动做的GC，将变量设置为"),r("code",[a._v("null")]),a._v("是触发垃圾回收的一种机制。")]),a._v(" "),r("h2",{attrs:{id:"chrome与内存分析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#chrome与内存分析","aria-hidden":"true"}},[a._v("#")]),a._v(" Chrome与内存分析")]),a._v(" "),r("p",[a._v("chrome可以通过"),r("code",[a._v("memory")]),a._v("来查看内存。按钮为"),r("code",[a._v("take heap snapshot")]),a._v("。")]),a._v(" "),r("p",[a._v("其中"),r("code",[a._v("heap")]),a._v("为堆，"),r("code",[a._v("stack")]),a._v("为栈。")]),a._v(" "),r("p",[a._v("其中值类型保存在"),r("code",[a._v("stack")]),a._v("，而引用类型保存在"),r("code",[a._v("heap")]),a._v("。")]),a._v(" "),r("p",[a._v("而且"),r("code",[a._v("heap")]),a._v("内存只在运行的时候分配，"),r("code",[a._v("stack")]),a._v("内存为建立的时候分配。")]),a._v(" "),r("p",[a._v("因此"),r("code",[a._v("chrome")]),a._v("工具，只能够查看"),r("code",[a._v("heap")]),a._v("内存(因为只有"),r("code",[a._v("take heap snapshot")]),a._v("按钮)，而那些"),r("code",[a._v("stack")]),a._v("内存里面的变量，"),r("strong",[a._v("无法查看")]),a._v("(console方法另说)。")])])},[],!1,null,null,null);t.default=v.exports}}]);