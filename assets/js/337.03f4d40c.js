(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{348:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react-ts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-ts"}},[t._v("#")]),t._v(" React-ts")]),t._v(" "),s("blockquote",[s("p",[t._v("与 typescript 遇上会如何")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#react-ts"}},[t._v("React-ts")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%89%8D%E8%A8%80"}},[s("strong",[t._v("前言")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#ts-in-react-project"}},[s("strong",[t._v("TS in React Project")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#babel"}},[s("strong",[t._v("Babel")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E5%BC%95%E7%94%A8"}},[t._v("引用")])])])])]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" "),s("strong",[t._v("前言")])]),t._v(" "),s("p",[t._v("当你安装了"),s("code",[t._v("typescript")]),t._v("全局，那么就可以通过"),s("code",[t._v("tsc")]),t._v("将"),s("code",[t._v("TS")]),t._v("文件转化为"),s("code",[t._v("JS")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"ts-in-react-project"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ts-in-react-project"}},[t._v("#")]),t._v(" "),s("strong",[t._v("TS in React Project")])]),t._v(" "),s("p",[s("strong",[t._v("安装")])]),t._v(" "),s("ol",[s("li",[s("code",[t._v("TS")]),t._v("是以全局包进行安装的"),s("code",[t._v("npm install typescript -g")])]),t._v(" "),s("li",[t._v("以及进行类型检查的通过"),s("code",[t._v("npm install @types/packagename --save-dev")]),t._v("来下载某些包的类型声明文件（从"),s("code",[t._v("ts2.0")]),t._v("开始如此） / 最好下载这个文件")])]),t._v(" "),s("p",[s("strong",[t._v("配置")])]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("tsconfig.json")]),t._v(" - "),s("code",[t._v("ts")]),t._v("最终都会转化为"),s("code",[t._v("js")]),t._v("文件，因此"),s("code",[t._v("tsc")]),t._v("会从该文件中读取配置项")]),t._v(" "),s("blockquote",[s("p",[t._v("关于这个文件，有几个是需要注意的，可以参考"),s("a",{attrs:{href:"https://github.com/Microsoft/TypeScript-React-Starter/blob/master/tsconfig.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-starter"),s("OutboundLink")],1)])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("jsx")]),t._v(" - 是为了支持"),s("code",[t._v("jsx")]),t._v("格式")])])]),t._v(" "),s("li",[s("p",[t._v("路径缩写，例如"),s("code",[t._v("@/components")]),t._v("指代"),s("code",[t._v("src/components/")]),t._v("避免陷入相对路径的地狱，需要 "),s("strong",[t._v("进行两步")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("如果使用了"),s("code",[t._v("webpack")]),t._v("的话，"),s("code",[t._v("resolve->alias")]),t._v("配置项")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  alidas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在"),s("code",[t._v("webpack")]),t._v("打包的时候的路径")])]),t._v(" "),s("li",[s("p",[t._v("对于"),s("code",[t._v("vscode")]),t._v("来说，路径提示还需要额外配置，如果你使用"),s("code",[t._v("ts")]),t._v("就会读取"),s("code",[t._v("tsconfig.json")]),t._v("（否则就是"),s("code",[t._v("jsconfig.json")]),t._v("）。"),s("strong",[t._v("注意baseUrl 以及paths 两个配置项必须共同出现")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"compilerOptions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sourceMap"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jsx"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"baseUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"paths"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@/*"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("关于"),s("strong",[t._v("编译")]),t._v("，有一个配置项为"),s("code",[t._v("lib")])]),t._v(" "),s("blockquote",[s("p",[t._v("问题就出在"),s("code",[t._v("lib")]),t._v("，如果同时使用了"),s("code",[t._v("babel")]),t._v("想要使用"),s("code",[t._v("es6")]),t._v("语法&"),s("code",[t._v("api")]),t._v("。"),s("strong",[t._v("就必须使用"),s("code",[t._v("lib: ['dom', 'es6']")])]),t._v("，不然就没有办法使用？")])]),t._v(" "),s("p",[t._v("个人理解"),s("code",[t._v("lib")]),t._v("作用就是编译"),s("code",[t._v("ts")]),t._v("时候支持的语法。")])]),t._v(" "),s("li",[s("p",[t._v("在"),s("code",[t._v("webpack")]),t._v("以及"),s("code",[t._v("tsconfig.json")]),t._v("中添加了"),s("code",[t._v("sourcemap")]),s("a",{attrs:{href:"https://juejin.im/post/58293502a0bb9f005767ba2f",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"babel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Babel")])]),t._v(" "),s("blockquote",[s("p",[t._v("添加"),s("code",[t._v("babel")]),t._v("支持")])]),t._v(" "),s("p",[t._v("参考了"),s("a",{attrs:{href:"https://github.com/TypeStrong/ts-loader/blob/master/examples/react-babel-allowjs/.babelrc",target:"_blank",rel:"noopener noreferrer"}},[t._v("ts-loader-example"),s("OutboundLink")],1),t._v("进行配置。")]),t._v(" "),s("p",[t._v("但是在之前写过一篇文章指出"),s("code",[t._v("babel")]),t._v("分为语法以及"),s("code",[t._v("API")]),t._v("的转义，而以上只是进行了语法的转义。")]),t._v(" "),s("p",[s("strong",[t._v("但是关键在于在"),s("a",{attrs:{href:"#ts-in-react-project"}},[t._v("TS in React Project")]),t._v("提到了"),s("code",[t._v("lib")])]),t._v("，就会有一个疑问？")]),t._v(" "),s("blockquote",[s("p",[t._v("既然可以通过"),s("code",[t._v("tsconfig.json")]),t._v("让"),s("code",[t._v("ts")]),t._v("支持"),s("code",[t._v("es6 or es7")]),t._v("。那么还有必要"),s("code",[t._v("babel")]),t._v("吗")])]),t._v(" "),s("blockquote",[s("p",[t._v("而且发现，"),s("strong",[t._v("不添加"),s("code",[t._v("tsconfig.json")]),t._v("中"),s("code",[t._v("lib")]),t._v("，只是"),s("code",[t._v(".babelrc")])]),t._v("。是没有办法识别"),s("code",[t._v("ts")]),t._v("中新的"),s("code",[t._v("es6")]),t._v("语法")])]),t._v(" "),s("p",[s("strong",[t._v("关于"),s("code",[t._v("babel-loader and ts-loader")]),t._v("理解")])]),t._v(" "),s("ol",[s("li",[t._v("因此"),s("code",[t._v("ts-loader")]),t._v("根据"),s("code",[t._v("tsconfig.json")]),t._v("理解"),s("code",[t._v("ts or tsx")]),t._v("文件")]),t._v(" "),s("li",[s("code",[t._v("babel-loader")]),t._v("应该是支持的"),s("code",[t._v("js")]),t._v("文件，在"),s("a",{attrs:{href:"https://github.com/TypeStrong/ts-loader/tree/master/examples/react-babel-allowjs",target:"_blank",rel:"noopener noreferrer"}},[t._v("ts-loader-example"),s("OutboundLink")],1),t._v("可以看到，在需要支持"),s("code",[t._v("js")]),t._v("的时候才会加入"),s("code",[t._v("babel")])])]),t._v(" "),s("p",[s("strong",[t._v("可以得到结论：")])]),t._v(" "),s("ol",[s("li",[t._v("如果是纯"),s("code",[t._v("ts")]),t._v("工程，不需要"),s("code",[t._v("babel")])]),t._v(" "),s("li",[t._v("如果含有"),s("code",[t._v("js")]),t._v("，那么可能需要"),s("code",[t._v("babel")]),t._v(" - 既然选择了"),s("code",[t._v("ts")]),t._v("，尽量也不要使用"),s("code",[t._v("js")])]),t._v(" "),s("li",[t._v("如果第三方库文件含有"),s("code",[t._v("js")]),t._v("文件 - "),s("strong",[t._v("待验证")])])]),t._v(" "),s("h2",{attrs:{id:"引用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引用"}},[t._v("#")]),t._v(" 引用")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.im/post/5a79adeef265da4e93116430",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-in-react"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.typescriptlang.org/docs/handbook/compiler-options.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方"),s("code",[t._v("tsconfig.json")]),t._v("参考链接"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/hstarorg/HstarDoc/blob/master/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/TypeScript%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6tsconfig%E7%AE%80%E6%9E%90.md",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("tsconfig.json")]),t._v("配置项中文说明"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/huangpb123/article/details/78556652",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-热更新指导性配置文章"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=r.exports}}]);