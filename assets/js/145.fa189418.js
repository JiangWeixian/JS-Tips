(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{270:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"你不知道的javascript"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#你不知道的javascript"}},[t._v("#")]),t._v(" 你不知道的JavaScript")]),t._v(" "),s("blockquote",[s("p",[t._v("scope&closures(作用域和闭包)")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84javascript"}},[t._v("你不知道的JavaScript")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#1-ch1---%E4%BB%80%E4%B9%88%E6%98%AF%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[t._v("1. CH1 - 什么是作用域")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#11-lhsrhs"}},[t._v("1.1 LHS/RHS")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#2-ch2---lexical-scope%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[t._v("2. CH2 - Lexical Scope(词法作用域)")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#21-%E6%9F%A5%E6%89%BE%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[t._v("2.1 查找词法作用域")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#22-%E6%AC%BA%E9%AA%97"}},[t._v("2.2 欺骗")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#3-ch3---%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[t._v("3. CH3 - 函数作用域和块作用域")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#31-%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[t._v("3.1 函数作用域")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#311-%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E5%92%8C%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F"}},[t._v("3.1.1 函数声明和函数表达式")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#32-%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[t._v("3.2 块作用域？")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#321-es6--%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[t._v("3.2.1 ES6 + 块作用域")])])])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#4-ch4---%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%AF%AD%E6%B3%95%E8%BF%9B%E9%98%B6"}},[t._v("4. CH4 - 作用域/语法进阶")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#41-%E5%86%8D%E4%B8%80%E6%AC%A1lhsrhs"}},[t._v("4.1 再一次LHS/RHS")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#5-ch5---%E9%97%AD%E5%8C%85"}},[t._v("5. CH5 - 闭包")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#51-%E6%A8%A1%E5%9D%97"}},[t._v("5.1 模块")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#511-es6--%E6%A8%A1%E5%9D%97"}},[t._v("5.1.1 ES6 + 模块")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#52-iife%E5%92%8C%E9%97%AD%E5%8C%85"}},[t._v("5.2 IIFE和闭包")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#53-%E5%BE%AA%E7%8E%AF%E9%97%AD%E5%8C%85"}},[t._v("5.3 循环+闭包")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#6-%E9%99%84%E5%BD%95a"}},[t._v("6. 附录A")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#7-%E9%99%84%E5%BD%95b"}},[t._v("7. 附录B")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#8-%E9%99%84%E5%BD%95c"}},[t._v("8. 附录C")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#9-%E6%80%BB%E7%BB%93"}},[t._v("9. 总结")])])])])]),t._v(" "),s("h2",{attrs:{id:"_1-ch1-什么是作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ch1-什么是作用域"}},[t._v("#")]),t._v(" 1. CH1 - 什么是作用域")]),t._v(" "),s("p",[t._v("指出，"),s("code",[t._v("JavaScript")]),t._v("是一种"),s("strong",[t._v("动态编译语言")]),t._v("。")]),t._v(" "),s("p",[t._v("理解作用域从三个方面：")]),t._v(" "),s("ul",[s("li",[t._v("引擎（类似"),s("code",[t._v("chrome")]),t._v("）")]),t._v(" "),s("li",[t._v("编译器")]),t._v(" "),s("li",[t._v("作用域")])]),t._v(" "),s("p",[t._v('其实对于一条普通的语句，编译通过作用域"分词"，通过引擎通过作用域复制。')]),t._v(" "),s("p",[t._v("可以发现"),s("strong",[t._v("作用域")]),t._v("是链接编译器和引擎的枢纽，或者是使得两者工作的重要纽带。")]),t._v(" "),s("h3",{attrs:{id:"_1-1-lhs-rhs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-lhs-rhs"}},[t._v("#")]),t._v(" 1.1 LHS/RHS")]),t._v(" "),s("p",[s("code",[t._v("LHS/RHS")]),t._v("的知识有没有用，不太清楚，感觉太理论。以下就简单的记录一下。")]),t._v(" "),s("p",[t._v("查找一个变量进行的是"),s("code",[t._v("RHS")]),t._v("操作，赋值操作的是"),s("code",[t._v("LHS")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("L/R")]),t._v("分别代表的是等式的左边或/右边，但是我认为，查找和赋值的区分更好理解。")])]),t._v(" "),s("p",[s("strong",[t._v("注意：")]),t._v(" 函数参数的隐含赋值（LHS）")]),t._v(" "),s("h2",{attrs:{id:"_2-ch2-lexical-scope-词法作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ch2-lexical-scope-词法作用域"}},[t._v("#")]),t._v(" 2. CH2 - Lexical Scope(词法作用域)")]),t._v(" "),s("p",[t._v("可以理解为 "),s("strong",[t._v("词法")]),t._v(" + "),s("strong",[t._v("作用域")]),t._v("。")]),t._v(" "),s("p",[t._v("作用域在之前就已经提到过了，和"),s("code",[t._v("{...}")]),t._v("该符号密切相关。")]),t._v(" "),s("p",[t._v("词法就是在 "),s("strong",[t._v("CH1 - 什么是作用域")]),t._v("提到了的编译第一步，分词。先要知道，一条语句，分多少的词。")]),t._v(" "),s("h3",{attrs:{id:"_2-1-查找词法作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-查找词法作用域"}},[t._v("#")]),t._v(" 2.1 查找词法作用域")]),t._v(" "),s("ul",[s("li",[t._v("冒泡形式，从下到上不断查找。")]),t._v(" "),s("li",[t._v("当第一个变量被找到的时候，就停止查找。")])]),t._v(" "),s("p",[t._v("一般来说，"),s("code",[t._v("JS")]),t._v("中提到的作用域指的是就是词法作用域，作用域语言在书写的时候就确定了。可以在 "),s("a",{attrs:{href:"https://stackoverflow.com/questions/17279437/lexical-scope-closures-in-javascript",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v(" 找到解释。")]),t._v(" "),s("h3",{attrs:{id:"_2-2-欺骗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-欺骗"}},[t._v("#")]),t._v(" 2.2 欺骗")]),t._v(" "),s("p",[s("code",[t._v("JavaScript")]),t._v("某些语句可以创建自己的作用域。（不改变上下文的那种，此作用域内部变量都属于新的那种）。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("eval")]),t._v("和"),s("code",[t._v("with")]),t._v("，这两个都不要使用！！！")]),t._v(" "),s("li",[s("code",[t._v("settimeout")]),t._v("之类，也会有这种效果。以前使用过程中也是遇到过了。")])]),t._v(" "),s("h2",{attrs:{id:"_3-ch3-函数作用域和块作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ch3-函数作用域和块作用域"}},[t._v("#")]),t._v(" 3. CH3 - 函数作用域和块作用域")]),t._v(" "),s("h3",{attrs:{id:"_3-1-函数作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-函数作用域"}},[t._v("#")]),t._v(" 3.1 函数作用域")]),t._v(" "),s("p",[t._v("函数作用域正如之前了解的那样，高层函数作用域的变量可以被底层的访问到。这就会导致一些问题，所以要注意：")]),t._v(" "),s("ul",[s("li",[t._v("有些时候函数嵌套函数，会比把函数暴露出去有用")]),t._v(" "),s("li",[t._v("由于函数作用域特性（底层也可以访问），所以要注意不要覆盖。比如高层有变量"),s("code",[t._v("i")]),t._v("，底层如果"),s("code",[t._v("i=3")]),t._v("会导致覆盖，而"),s("code",[t._v("var i = 3")]),t._v("则不会覆盖。")])]),t._v(" "),s("p",[t._v("避免这些问题，文中提到的一个解决方案就是"),s("strong",[t._v("命名空间")]),t._v("，类似"),s("code",[t._v("using namespace std;")]),t._v("，这部分只是在《设计模式》书中应该会有提及。")]),t._v(" "),s("h4",{attrs:{id:"_3-1-1-函数声明和函数表达式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-函数声明和函数表达式"}},[t._v("#")]),t._v(" 3.1.1 函数声明和函数表达式")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- 插入这个")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- 和这个")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- 插入这个")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- 和这个")]),t._v("\n")])])]),s("p",[t._v("以上两段代码不同点在于，一个是函数声明一个是函数表达式。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("function")]),t._v("开头的是函数声明，不然就是表达式")]),t._v(" "),s("li",[t._v("第二段代码中表达式最后的"),s("code",[t._v("()")]),t._v("，让程序立刻执行这个表达式。称之为"),s("code",[t._v("IIFE")])])]),t._v(" "),s("p",[s("strong",[t._v("注意")]),t._v("，IIFE是可以传入参数的。")]),t._v(" "),s("h3",{attrs:{id:"_3-2-块作用域？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-块作用域？"}},[t._v("#")]),t._v(" 3.2 块作用域？")]),t._v(" "),s("p",[t._v("我的记忆中，"),s("code",[t._v("JavaScript")]),t._v("是没有块作用域这个概念的。")]),t._v(" "),s("p",[t._v("一般其余的代码语言都有这个概念，块作用域的概念在于：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("如果"),s("strong",[t._v("块作用域")]),t._v("概念成立，那么"),s("code",[t._v("i")]),t._v("仅仅属于"),s("code",[t._v("for")]),t._v("，外部是无法访问的。可是，"),s("code",[t._v("JavaScript")]),t._v("是没有这个概念的，所以这个"),s("code",[t._v("i")]),t._v("还是会被外部访问到，也就是说如果，你立马跟着一句"),s("code",[t._v("console.log(i)")]),t._v("，那么结果将会是"),s("code",[t._v("10")]),t._v("。")]),t._v(" "),s("p",[t._v("所以除了"),s("code",[t._v("function")]),t._v("的"),s("code",[t._v("{}")]),t._v("，之外所有语句带有"),s("code",[t._v("{}")]),t._v("，一句其中声明的变量都属于"),s("code",[t._v("function(){}")]),t._v("或者全局。")]),t._v(" "),s("p",[s("strong",[t._v("注意："),s("strong",[t._v("正如")]),t._v("2.2 欺骗")]),t._v("所提到的，有些语句会包裹一个新的作用域。这就有点像"),s("strong",[t._v("块作用域")]),t._v("。所以特殊情况下，以下会导致块作用域：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("eval")]),t._v("  - 不要使用")]),t._v(" "),s("li",[s("code",[t._v("with")]),t._v(" - 不要使用")]),t._v(" "),s("li",[s("code",[t._v("try catch")]),t._v(" - 小心使用，在"),s("code",[t._v("catch")]),t._v("内部具有块作用域。")])]),t._v(" "),s("h4",{attrs:{id:"_3-2-1-es6-块作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-es6-块作用域"}},[t._v("#")]),t._v(" 3.2.1 ES6 + 块作用域")]),t._v(" "),s("p",[t._v("其实块作用域还是比较有用的，所以"),s("code",[t._v("ES6")]),t._v("还是改进了这不部分。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("let")]),t._v(" - 只要是"),s("code",[t._v("let")]),t._v("声明的变量，只能在当前的"),s("code",[t._v("{}")]),t._v("内部使用，外部无法访问。")]),t._v(" "),s("li",[s("code",[t._v("const")]),t._v(" - 块作用域这一特点还是和"),s("code",[t._v("let")]),t._v("类似。自身特点是"),s("strong",[t._v("常量")]),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"_4-ch4-作用域-语法进阶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ch4-作用域-语法进阶"}},[t._v("#")]),t._v(" 4. CH4 - 作用域/语法进阶")]),t._v(" "),s("h2",{attrs:{id:"_4-1-再一次lhs-rhs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-再一次lhs-rhs"}},[t._v("#")]),t._v(" 4.1 再一次LHS/RHS")]),t._v(" "),s("p",[s("strong",[t._v("明确一点，声明(LHS)永远在赋值(RHS)之前")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("执行的顺序永远是：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("var a")])]),t._v(" "),s("li",[s("code",[t._v("a = 2")])]),t._v(" "),s("li",[s("code",[t._v("console.log(a)")])])]),t._v(" "),s("p",[t._v("这一点即使在函数作用域内部也是可以成立的。")]),t._v(" "),s("p",[t._v("但是对于函数有一个特例：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不是 ReferenceError， 而是 TypeError!")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("foo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("以上依然报错。总结来说就是"),s("code",[t._v("var foo = function bar()")]),t._v("并不是函数声明而是表达式（因为它不是"),s("code",[t._v("function")]),t._v("开头的？），能做的就是先"),s("code",[t._v("var foo")]),t._v("。（"),s("code",[t._v("foo")]),t._v("是一个函数名）")]),t._v(" "),s("p",[t._v("以及，我们不要重复定义同名函数，特别是在同一个作用域中（当然了一般也没有人这么做）。原因在于：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("function foo")])]),t._v(" "),s("li",[s("code",[t._v("var foo")])])]),t._v(" "),s("p",[t._v("两者具有优先级，前者优先级别高。"),s("strong",[t._v("虽然在第一条代码情况下，var foo会被忽略。但是如果在之后含有var foo = function(){}(因为var =foo被提前)。仍然会出现错误。")])]),t._v(" "),s("h2",{attrs:{id:"_5-ch5-闭包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-ch5-闭包"}},[t._v("#")]),t._v(" 5. CH5 - 闭包")]),t._v(" "),s("p",[t._v("其实"),s("strong",[t._v("闭包")]),t._v("的概念，之前就已经了解了。"),s("strong",[t._v("即，底层作用域可以访问高层作用域变量")]),t._v("。不过，这是对闭包比较浅薄的理解。")]),t._v(" "),s("p",[t._v("最直接的理解例子：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" baz "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("baz")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2 -- 哇噢，看到闭包了，伙计。")]),t._v("\n")])])]),s("p",[t._v("那么例子总结一下，什么叫作闭包。"),s("strong",[t._v("外部"),s("code",[t._v("baz")]),t._v("仍然有"),s("code",[t._v("foo")]),t._v("内部的引用，这个概念就是闭包。闭包就是函数能够记住并访问它的词法作用域，即使当这个函数在它的词法作用域之外执行时。")]),t._v("。")]),t._v(" "),s("p",[t._v("以上面的代码为例子，"),s("code",[t._v("bar")]),t._v("可以访问"),s("code",[t._v("foo")]),t._v("的权利。现在有一个"),s("code",[t._v("baz")]),t._v("得到了"),s("code",[t._v("bar")]),t._v("这个内部函数。"),s("code",[t._v("baz")]),t._v(" 还是可以访问到 "),s("code",[t._v("foo")]),t._v(" 内部数据。")]),t._v(" "),s("p",[t._v("扩展开来，外部"),s("code",[t._v("baz")]),t._v("（不仅仅是底层）可以访问到同一级别的"),s("code",[t._v("foo")]),t._v("内部的变量。因为"),s("code",[t._v("baz")]),t._v("和"),s("code",[t._v("foo")]),t._v("都处于同一个作用域内部。"),s("strong",[t._v("baz可以使用bar，以及bar可以使用foo，这就是原因。")])]),t._v(" "),s("h3",{attrs:{id:"_5-1-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-模块"}},[t._v("#")]),t._v(" 5.1 模块")]),t._v(" "),s("p",[t._v("之前，一直使用的是利用"),s("code",[t._v("prototype")]),t._v("给定义函数添加方法属性。然后通过"),s("code",[t._v("new")]),t._v("关键字创建模块。")]),t._v(" "),s("p",[t._v("但是这里好像对模块和类做了区分，之前"),s("strong",[t._v("this&objprotoype")]),t._v("中创建的是类。而不是模块？这一点很难理解。")]),t._v(" "),s("p",[t._v("不过观察其中代码发现，模块的写法有几个特点（区别与类）：")]),t._v(" "),s("ul",[s("li",[t._v("和原型链好像没什么关系，没有"),s("code",[t._v("new/object.create")]),t._v("之类")]),t._v(" "),s("li",[t._v("有返回值（返回的是内部函数，决定哪些可以暴露出来的属性方法），通过执行模块函数。获取模块内部属性参数。")])]),t._v(" "),s("p",[t._v("其模块的写法模板为：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CoolModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("identify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tidentify"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" identify\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foo1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CoolModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo 1"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foo2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CoolModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo 2"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfoo1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("identify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "foo 1"')]),t._v("\nfoo2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("identify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "foo 2"')]),t._v("\n")])])]),s("p",[t._v("甚至有一些模块定义的库，可以了解一下。")]),t._v(" "),s("h4",{attrs:{id:"_5-1-1-es6-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-es6-模块"}},[t._v("#")]),t._v(" 5.1.1 ES6 + 模块")]),t._v(" "),s("p",[t._v("增加了"),s("code",[t._v("export")]),t._v("关键字，通过"),s("code",[t._v("export xx")]),t._v("把一个"),s("code",[t._v("xx")]),t._v("作为模块导出。")]),t._v(" "),s("p",[t._v("更多关于"),s("code",[t._v("export")]),t._v("的用法，可以查看"),s("code",[t._v("ES6")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_5-2-iife和闭包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-iife和闭包"}},[t._v("#")]),t._v(" 5.2 IIFE和闭包")]),t._v(" "),s("p",[t._v("以下代码不能理解，但的确发生了。记录一下，以免忘记。")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" gimmeSomething "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" nextVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextVal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tnextVal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tnextVal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" nextVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nextVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gimmeSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gimmeSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 9")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gimmeSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 33")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gimmeSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 105")]),t._v("\n")])])]),s("h3",{attrs:{id:"_5-3-循环-闭包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-循环-闭包"}},[t._v("#")]),t._v(" 5.3 循环+闭包")]),t._v(" "),s("p",[t._v("超时的回调函数都将在循环的完成之后立即运行，即便回调函数立马执行。可以解释"),s("code",[t._v("settimeout")]),t._v("的bugs。")]),t._v(" "),s("div",{staticClass:"language-Javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("由于没有块概念，且使用了"),s("code",[t._v("var")]),t._v("。因此每次"),s("code",[t._v("for")]),t._v("其实只有一个"),s("code",[t._v("i")]),t._v("存在于作用域。假设使用了"),s("code",[t._v("let")]),t._v("，那么相当于定义了多个作用域，且每个作用域都有一个"),s("code",[t._v("i")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"_6-附录a"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-附录a"}},[t._v("#")]),t._v(" 6. 附录A")]),t._v(" "),s("p",[t._v("正如"),s("router-link",{attrs:{to:"/Books/youdotkonwjs/this&objprototypes/thisandobjprototypes.html"}},[t._v("thisandobjprototype")]),t._v("其中"),s("strong",[t._v("2.1.1 隐式转换")]),t._v("所提到的那样。")],1),t._v(" "),s("p",[s("code",[t._v("this")]),t._v("的指向在调用时候改变，这有点像动态作用域。")]),t._v(" "),s("p",[t._v("那么按照这样理解，本附录的代码不应该如此输出才对。原因出在哪里？")]),t._v(" "),s("p",[t._v("其实很好理解，因为"),s("router-link",{attrs:{to:"/Books/youdotkonwjs/this&objprototypes/thisandobjprototypes.html"}},[t._v("thisandobjprototype")]),t._v("明明说的就是"),s("code",[t._v("this")]),t._v("，本附录的代码明明就没有"),s("code",[t._v("this")]),t._v("，又哪里来的"),s("code",[t._v("this")]),t._v("指向改变。")],1),t._v(" "),s("h2",{attrs:{id:"_7-附录b"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-附录b"}},[t._v("#")]),t._v(" 7. 附录B")]),t._v(" "),s("p",[t._v("再一次介绍了"),s("code",[t._v("let")]),t._v("块作用域，以及用"),s("code",[t._v("ES6")]),t._v("之前语法构成块作用域的弥补库..")]),t._v(" "),s("h2",{attrs:{id:"_8-附录c"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-附录c"}},[t._v("#")]),t._v(" 8. 附录C")]),t._v(" "),s("p",[t._v("介绍了"),s("code",[t._v("ES6")]),t._v("关键符号"),s("code",[t._v("=>")]),t._v("，解决的是"),s("code",[t._v("this")]),t._v("绑定的问题。")]),t._v(" "),s("p",[s("code",[t._v("=>")]),t._v("是将外层作用域的"),s("code",[t._v("this")]),t._v("绑定到上面。")]),t._v(" "),s("h2",{attrs:{id:"_9-总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-总结"}},[t._v("#")]),t._v(" 9. 总结")]),t._v(" "),s("ul",[s("li",[t._v("介绍了"),s("code",[t._v("JavaScript")]),t._v("编译之类的相关知识（不深）")]),t._v(" "),s("li",[t._v("函数作用域和块作用域")]),t._v(" "),s("li",[t._v("LHS/RHS")]),t._v(" "),s("li",[t._v("闭包、模块的写法\n"),s("ul",[s("li",[s("code",[t._v("ES6")]),t._v("的表现")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);