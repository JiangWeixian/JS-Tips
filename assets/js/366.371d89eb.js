(window.webpackJsonp=window.webpackJsonp||[]).push([[366],{280:function(e,v,_){"use strict";_.r(v);var t=_(0),r=Object(t.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"webpack-plugins"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#webpack-plugins"}},[e._v("#")]),e._v(" Webpack - plugins")]),e._v(" "),_("blockquote",[_("p",[e._v("热门 & 好用插件指南；"),_("a",{attrs:{href:"https://webpack.docschina.org/plugins/html-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[e._v("链接-优秀而好用的插件列表(官方版本)"),_("OutboundLink")],1),e._v("；"),_("a",{attrs:{href:"https://github.com/JiangWeixian/LearningWebpack/tree/react-simple-TS",target:"_blank",rel:"noopener noreferrer"}},[e._v("example地址链接"),_("OutboundLink")],1)])]),e._v(" "),_("h2",{attrs:{id:"前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),_("p",[e._v("当我们打包一个文件生成"),_("code",[e._v("js or css")]),e._v("。可能会经历多次打包，不同打包之间最好 "),_("strong",[e._v("要求生成文件名是不同的。")])]),e._v(" "),_("p",[e._v("所以配置中就会出现"),_("code",[e._v("[name].[contenthash].xx")]),e._v("配置项，因为文件名是不变的，而"),_("code",[e._v("contenthash")]),e._v("随着不同打包而不同。")]),e._v(" "),_("h2",{attrs:{id:"dev-服务器"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dev-服务器"}},[e._v("#")]),e._v(" Dev 服务器")]),e._v(" "),_("blockquote",[_("p",[_("code",[e._v("Dev")]),e._v("阶段服务器，为了得到 Prod 阶段页面表现。性能和"),_("code",[e._v("build")]),e._v("版本有所差异，但是可以有 "),_("strong",[e._v("热更新以及相近的逻辑表现")])])]),e._v(" "),_("p",[e._v("配置项可以在"),_("a",{attrs:{href:"https://webpack.js.org/configuration/dev-server/#devserver",target:"_blank",rel:"noopener noreferrer"}},[e._v("此链接"),_("OutboundLink")],1),e._v("找到对应")]),e._v(" "),_("blockquote",[_("p",[e._v("以及配置项可以通过"),_("code",[e._v("webpack-dev-sever --配置项 xx?")]),e._v("通过命令行启动")])]),e._v(" "),_("p",[_("strong",[_("code",[e._v("xx?")])]),e._v(" 问号意味着配置项的输入时可选的...")]),e._v(" "),_("h2",{attrs:{id:"生成-html-模板"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#生成-html-模板"}},[e._v("#")]),e._v(" 生成 HTML 模板")]),e._v(" "),_("p",[_("a",{attrs:{href:"https://github.com/jantimon/html-webpack-plugin#options",target:"_blank",rel:"noopener noreferrer"}},[e._v("html-webpack-plugin"),_("OutboundLink")],1)]),e._v(" "),_("p",[_("strong",[e._v("基本能力")])]),e._v(" "),_("ul",[_("li",[e._v("有能力不直接写"),_("code",[e._v("html")]),e._v("文件，而通过配置项来生成"),_("code",[e._v("html")]),e._v("文件")])]),e._v(" "),_("p",[_("strong",[e._v("不可忽视能力")])]),e._v(" "),_("blockquote",[_("p",[e._v("一般都是先写"),_("code",[e._v("index.html")]),e._v("文件（作为模板），然后通过插件填补"),_("code",[e._v("html")]),e._v("文件中的某些内容")])]),e._v(" "),_("ul",[_("li",[e._v("「任何环境下」"),_("strong",[e._v("插入文件")]),e._v(" - 将生成的文件("),_("code",[e._v("js or css")]),e._v(")插入到"),_("code",[e._v("html")]),e._v("文件中")]),e._v(" "),_("li",[e._v("「生产环境下」可以压缩代码 - 指的是压缩"),_("code",[e._v("html")]),e._v("部分代码")])]),e._v(" "),_("p",[_("strong",[e._v("容易忽视的能力")])]),e._v(" "),_("ul",[_("li",[e._v("支持"),_("code",[e._v("ico")]),e._v("文件")])]),e._v(" "),_("h2",{attrs:{id:"提取-css-文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#提取-css-文件"}},[e._v("#")]),e._v(" 提取 CSS 文件")]),e._v(" "),_("blockquote",[_("p",[e._v("MiniCSSExtractPlugin")])]),e._v(" "),_("p",[e._v("需要分为"),_("code",[e._v("loaders & plugin")]),e._v("两部分，"),_("a",{attrs:{href:""}},[e._v("loaders 部分链接")]),e._v("。")]),e._v(" "),_("ol",[_("li",[e._v("loaders - 为了处理"),_("code",[e._v("css")]),e._v("（包括预处理以及后处理），以及生成标签")]),e._v(" "),_("li",[e._v("plugin - 为了生成文件")])]),e._v(" "),_("h2",{attrs:{id:"压缩-js"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#压缩-js"}},[e._v("#")]),e._v(" 压缩 JS")]),e._v(" "),_("blockquote",[_("p",[e._v("(in webpack4)webpack.optimize.UglifyJsPlugin()")])]),e._v(" "),_("p",[e._v("默认配置应该够用的了。")]),e._v(" "),_("h2",{attrs:{id:"分包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#分包"}},[e._v("#")]),e._v(" 分包")]),e._v(" "),_("blockquote",[_("p",[e._v("分离代码，好处在于工程第三方库一般不更新。独立出来的话，可以避免打包的时候重新生成新文件，文件名没有变的话，线上也就不会重新下载。")])]),e._v(" "),_("p",[e._v("个人理解可以分为：")]),e._v(" "),_("ol",[_("li",[e._v("第三方库文件 - vendors")]),e._v(" "),_("li",[e._v("框架可能要提取出来 - (react|vue)Vendor，因为这部分可能还是会升级")]),e._v(" "),_("li",[e._v("\b公用文件 - "),_("code",[e._v("commons")]),e._v(", 被多次"),_("code",[e._v("import")]),e._v("的文件")]),e._v(" "),_("li",[e._v("异步文件 - "),_("code",[e._v("async")]),e._v("，异步加载的文件")])]),e._v(" "),_("p",[_("code",[e._v("in webpack4")]),e._v("应该使用")]),e._v(" "),_("div",{staticClass:"language-js extra-class"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[e._v("optimization"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  splitChunks"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),_("p",[e._v("而不需要新的插件。")]),e._v(" "),_("p",[_("strong",[e._v("除了这些已知的"),_("code",[e._v("chunks")]),e._v("之外。还有一个"),_("code",[e._v("runtimechunk")])]),e._v("，配置与否都不会对线上有什么影响。可以参考"),_("a",{attrs:{href:"https://juejin.im/post/5ac9b7165188255cb32e66cc",target:"_blank",rel:"noopener noreferrer"}},[e._v("runtimechunks-作用"),_("OutboundLink")],1),e._v("来理解。")]),e._v(" "),_("blockquote",[_("p",[e._v("为了处理几遍第三方库文件名没有更改，但是还是会重新打包一遍。为了避免这个重复的过程。才有了"),_("code",[e._v("runtimechunks")]),e._v("。")])]),e._v(" "),_("p",[_("strong",[e._v("小提升 - 清除"),_("code",[e._v("dist")]),e._v("文件夹 - "),_("code",[e._v("clean-webpack-plugin")])])]),e._v(" "),_("p",[e._v("每次打包都会在"),_("code",[e._v("dist")]),e._v("文件夹中产生新的文件，意味着之前的文件被保留了。")]),e._v(" "),_("p",[e._v("为了在每次打包之前清空一次"),_("code",[e._v("dist")]),e._v("文件夹，可以使用这个插件移除文件夹。")]),e._v(" "),_("p",[_("strong",[e._v("小提升 - 保持"),_("code",[e._v("hash")]),e._v(" - "),_("code",[e._v("HashedModuleIdsPlugin")])])]),e._v(" "),_("p",[e._v("避免第三库不变情况下，打包出来文件的"),_("code",[e._v("hash")]),e._v("在变化。")]),e._v(" "),_("h3",{attrs:{id:"webpack-分包解惑"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#webpack-分包解惑"}},[e._v("#")]),e._v(" Webpack 分包解惑")]),e._v(" "),_("p",[e._v("在"),_("code",[e._v("webpack")]),e._v("配置文件中可以看到"),_("code",[e._v("webpack.output")]),e._v("配置项，其中可以配置"),_("code",[e._v("chunkfile")]),e._v("。而以上的"),_("code",[e._v("splitchunks")]),e._v("（分包）就是对这部分文件进一步"),_("code",[e._v("split")]),e._v("。")]),e._v(" "),_("h2",{attrs:{id:"热更新"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[e._v("#")]),e._v(" 热更新")]),e._v(" "),_("p",[e._v("配置的时候发现，其实"),_("code",[e._v("webpack-dev-server")]),e._v("简单配置之后其实是能够进行 "),_("strong",[e._v("更改页面之后页面得到更新的（在没有使用其余热更新插件情况下）")])]),e._v(" "),_("p",[e._v("个人理解这应该是页面自动刷新而不是热更新！")]),e._v(" "),_("p",[e._v("更推荐的是通过"),_("code",[e._v("webpack-dev-server --hot")]),e._v("开启")]),e._v(" "),_("h2",{attrs:{id:"错误提示"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#错误提示"}},[e._v("#")]),e._v(" 错误提示")]),e._v(" "),_("p",[_("a",{attrs:{href:"https://github.com/geowarin/friendly-errors-webpack-plugin#readme",target:"_blank",rel:"noopener noreferrer"}},[e._v("friendlyerrors"),_("OutboundLink")],1)]),e._v(" "),_("p",[e._v("使用方式很简单，如"),_("code",[e._v("README")]),e._v("所说。"),_("strong",[e._v("关键在于取消默认的错误提示，设置"),_("code",[e._v("quiet: true")])])]),e._v(" "),_("p",[e._v("同时建议通过命令行开启"),_("code",[e._v("--progress")]),e._v("。")])])}),[],!1,null,null,null);v.default=r.exports}}]);