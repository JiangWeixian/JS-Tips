(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{304:function(e,v,_){"use strict";_.r(v);var t=_(0),r=Object(t.a)({},function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"tensorflow-vue"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tensorflow-vue","aria-hidden":"true"}},[e._v("#")]),e._v(" Tensorflow+Vue")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#tensorflowvue"}},[e._v("Tensorflow+Vue")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF"}},[e._v("关键技术")])]),e._v(" "),_("li",[_("a",{attrs:{href:"#%E6%B5%81%E7%A8%8B"}},[e._v("流程")])]),e._v(" "),_("li",[_("a",{attrs:{href:"#%E8%B0%83%E7%94%A8%E6%91%84%E5%83%8F%E5%A4%B4"}},[e._v("调用摄像头")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E6%B5%81%E7%A8%8B-1"}},[e._v("流程")])])])]),e._v(" "),_("li",[_("a",{attrs:{href:"#%E6%A3%80%E6%B5%8B"}},[e._v("检测")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E6%B5%81%E7%A8%8B-2"}},[e._v("流程")])])])]),e._v(" "),_("li",[_("a",{attrs:{href:"#%E6%98%BE%E7%A4%BA"}},[e._v("显示")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E9%97%AE%E9%A2%98%E6%89%80%E5%9C%A8"}},[e._v("问题所在？")])])])])])])]),e._v(" "),_("h2",{attrs:{id:"关键技术"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#关键技术","aria-hidden":"true"}},[e._v("#")]),e._v(" 关键技术")]),e._v(" "),_("ul",[_("li",[e._v("tensorflow.js and mobilenet - 都是"),_("code",[e._v("NPM")]),e._v("包")]),e._v(" "),_("li",[e._v("调用手机"),_("code",[e._v("camera")])]),e._v(" "),_("li",[_("a",{attrs:{href:"https://github.com/JiangWeixian/tf-mobilenet-vue",target:"_blank",rel:"noopener noreferrer"}},[e._v("项目地址"),_("OutboundLink")],1)])]),e._v(" "),_("h2",{attrs:{id:"流程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#流程","aria-hidden":"true"}},[e._v("#")]),e._v(" 流程")]),e._v(" "),_("p",[e._v("检测分为三个阶段：获取模型输入、进行检测和输出结果")]),e._v(" "),_("ol",[_("li",[e._v("获取输入 - 通过调用摄像头来获取输入图像")]),e._v(" "),_("li",[e._v("将摄像头得到的一帧图像作为模型输入")]),e._v(" "),_("li",[e._v("将模型的检测结果返回，并输出到屏幕上")])]),e._v(" "),_("h2",{attrs:{id:"调用摄像头"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#调用摄像头","aria-hidden":"true"}},[e._v("#")]),e._v(" 调用摄像头")]),e._v(" "),_("p",[_("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getUserMedia",target:"_blank",rel:"noopener noreferrer"}},[e._v("MDN-官方API参考"),_("OutboundLink")],1)]),e._v(" "),_("ul",[_("li",[e._v("获取摄像头数目(前置和后置) - "),_("code",[e._v("navigator.mediaDevices.enumerateDevices")])]),e._v(" "),_("li",[e._v("获取摄像头 - "),_("code",[e._v("navigator.getUserMedia")]),e._v("，现在新的"),_("code",[e._v("API")]),e._v("是"),_("code",[e._v("navigator.mediaDevices.getUserMedia")]),e._v("。可以设置 "),_("strong",[e._v("视频，音频以及是否前置后置摄像头")])])]),e._v(" "),_("h3",{attrs:{id:"流程-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#流程-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 流程")]),e._v(" "),_("ol",[_("li",[e._v("初始化摄像头 - 针对不同浏览器统一接口函数")]),e._v(" "),_("li",[e._v("获取摄像头数目")]),e._v(" "),_("li",[e._v("将摄像头数目、音频和视频(是否开启)作为参数传递来开启摄像头")])]),e._v(" "),_("p",[_("strong",[e._v("将视频流显示")])]),e._v(" "),_("p",[e._v("结合"),_("code",[e._v("video")]),e._v("标签使用，设置"),_("code",[e._v("video.src")]),e._v("为获取得到视频流(MDN做了兼容处理)")]),e._v(" "),_("p",[_("strong",[e._v("截取其中某一帧")])]),e._v(" "),_("p",[_("code",[e._v("SVG")]),e._v("具有画图功能")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("drawImage")]),e._v(" - 画图。在这个项目中，直接将"),_("code",[e._v("video")]),e._v("标签传递进来")]),e._v(" "),_("li",[_("code",[e._v("toDataURL")]),e._v(" - 将"),_("code",[e._v("svg")]),e._v("变为"),_("code",[e._v("image")]),e._v("的"),_("code",[e._v("src")]),e._v("，起到显示作用")])]),e._v(" "),_("h2",{attrs:{id:"检测"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#检测","aria-hidden":"true"}},[e._v("#")]),e._v(" 检测")]),e._v(" "),_("p",[_("a",{attrs:{href:"https://js.tensorflow.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("tensorflow.js"),_("OutboundLink")],1)]),e._v(" "),_("p",[e._v("在本例中，直接使用"),_("code",[e._v("tensorflow")]),e._v("的转换功能，将网络权重转换为网络模型。")]),e._v(" "),_("p",[e._v("如果想要训练的话，官方给了"),_("a",{attrs:{href:"https://js.tensorflow.org/tutorials/mnist.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("mnist例子"),_("OutboundLink")],1),e._v("。大体流程和"),_("code",[e._v("python")]),e._v("版本一致：")]),e._v(" "),_("ol",[_("li",[e._v("加载数据(包括输入和输出) - "),_("code",[e._v("data")]),e._v("通过"),_("code",[e._v("Image")]),e._v("数据并转化为"),_("code",[e._v("SVG")]),e._v("作为"),_("code",[e._v("image-data")]),e._v("，具体可看"),_("a",{attrs:{href:"https://github.com/tensorflow/tfjs-examples/blob/master/mnist/data.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("这里"),_("OutboundLink")],1),e._v("。")]),e._v(" "),_("li",[e._v("构建网络模型")]),e._v(" "),_("li",[e._v("设置误差更新目标函数，以及误差速率等")]),e._v(" "),_("li",[e._v("然后训练")])]),e._v(" "),_("p",[e._v("更多例子。")]),e._v(" "),_("p",[e._v("所以想要在更为复杂的数据集上训练并不合适：")]),e._v(" "),_("ol",[_("li",[e._v("如果通过"),_("code",[e._v("nodejs")]),e._v("来辅助的话，为什么不使用"),_("code",[e._v("python-tensorflow")]),e._v("然后转化为"),_("code",[e._v("tensorflow.js")]),e._v("使用")]),e._v(" "),_("li",[e._v("如果可以想要以"),_("code",[e._v("mnist")]),e._v("方式训练，数据请求是一个大问题")])]),e._v(" "),_("p",[_("strong",[e._v("这个一定要注意！也要说清楚。")])]),e._v(" "),_("h3",{attrs:{id:"流程-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#流程-3","aria-hidden":"true"}},[e._v("#")]),e._v(" 流程")]),e._v(" "),_("ol",[_("li",[e._v("加载网络模型 - 包括加载权重和构建网络")]),e._v(" "),_("li",[e._v("然后将 "),_("strong",[e._v("调用摄像头")]),e._v("中获得的图像作为输入。获得检测结果，接下来进入显示阶段。")])]),e._v(" "),_("h2",{attrs:{id:"显示"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#显示","aria-hidden":"true"}},[e._v("#")]),e._v(" 显示")]),e._v(" "),_("p",[e._v("了解了"),_("code",[e._v("debounce")]),e._v("之后，这部分还有改进部分。目前的方式是：")]),e._v(" "),_("ol",[_("li",[e._v("检测得到结果，设置显示"),_("code",[e._v("flag=true")])]),e._v(" "),_("li",[e._v("如果检测到"),_("code",[e._v("flag")]),e._v("为"),_("code",[e._v("true")]),e._v("。就开始进入显示动画，显示动画持续一段时间，然后消失。")])]),e._v(" "),_("h3",{attrs:{id:"问题所在？"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#问题所在？","aria-hidden":"true"}},[e._v("#")]),e._v(" 问题所在？")]),e._v(" "),_("p",[e._v("关键就在于这个显示。")]),e._v(" "),_("p",[e._v("因为如果连续点击检测按钮的话会有问题。可以参考"),_("code",[e._v("debounce")]),e._v("方法改进。")])])},[],!1,null,null,null);v.default=r.exports}}]);