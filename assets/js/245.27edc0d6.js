(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{581:function(e,v,_){"use strict";_.r(v);var t=_(0),o=Object(t.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"html-dom优化指南"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#html-dom优化指南"}},[e._v("#")]),e._v(" HTML - DOM优化指南")]),e._v(" "),_("blockquote",[_("p",[e._v("仅仅是DOM；"),_("strong",[e._v("但是也基本上是原生DOM操作的只是。如果是"),_("code",[e._v("Vue or React")]),e._v("这部分优化使用频率可能会少一些。")])])]),e._v(" "),_("h2",{attrs:{id:"前置知识-关于dom"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前置知识-关于dom"}},[e._v("#")]),e._v(" 前置知识 - 关于DOM")]),e._v(" "),_("p",[_("strong",[e._v("节点是什么？")])]),e._v(" "),_("blockquote",[_("p",[e._v("除了我们已知的节点标签。"),_("strong",[e._v("文本也是标签。")])])]),e._v(" "),_("p",[_("strong",[e._v("HTMLCollection以及NodeList？")])]),e._v(" "),_("p",[e._v("两种都是类"),_("code",[e._v("array")]),e._v("的数据结构，但是不完全就全具有"),_("code",[e._v("array")]),e._v("所有方法。")]),e._v(" "),_("blockquote",[_("p",[e._v("在"),_("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS-WebAPI-%E8%AF%AD%E6%B3%95%E9%80%9F%E5%86%99.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("WEBAPI-DOM&BOM"),_("OutboundLink")],1),e._v("有简要说明。"),_("strong",[e._v("前置一定是动态更新的数组，后者不一定。")]),e._v(" Node.childNodes以及Node.childElement对应上面两种(但是这两个返回的都是动态更新的)。同时"),_("code",[e._v("querySelector and getElement...")]),e._v("分别是"),_("code",[e._v("NodeList and HTMLCollection")]),e._v("，通过前面方法获取的"),_("code",[e._v("Nodelist")]),e._v("时静态的，后者是动态的。")])]),e._v(" "),_("p",[_("strong",[e._v("动态更新的含义？")])]),e._v(" "),_("blockquote",[_("p",[e._v("假设我们使用"),_("code",[e._v("divs = querySelector and getElement...")]),e._v("获取"),_("code",[e._v("div")]),e._v("。如果"),_("code",[e._v("divs")]),e._v("在后期变多了，后者获取的"),_("code",[e._v("divs.length")]),e._v("是在改变的。")])]),e._v(" "),_("p",[_("strong",[e._v("脱离文档流？")])]),e._v(" "),_("p",[e._v("分为两部分，一部分是操作节点脱离文档流，另一部分是动画脱离文档流。")]),e._v(" "),_("p",[e._v("操作节点脱离文档流：隐藏元素/DocumentFragment/nodelist")]),e._v(" "),_("p",[e._v("动画脱离文档流：定位/浮动")]),e._v(" "),_("h2",{attrs:{id:"任何事都有一种规则"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#任何事都有一种规则"}},[e._v("#")]),e._v(" 任何事都有一种规则")]),e._v(" "),_("ul",[_("li",[e._v("获取节点")]),e._v(" "),_("li",[e._v("操作节点 - 删除/添加/修改")]),e._v(" "),_("li",[e._v("样式修改")])]),e._v(" "),_("p",[e._v("可以总结下以下规则：")]),e._v(" "),_("ol",[_("li",[e._v("批量修改好过一个个修改")]),e._v(" "),_("li",[e._v("空间换取时间的规则依旧成立 - 例如缓存")]),e._v(" "),_("li",[e._v("JS操作时间优于DOM")]),e._v(" "),_("li",[e._v("内置方法优于自定义方法")]),e._v(" "),_("li",[e._v("脱离文档流 - 避免修改DOM结构树")]),e._v(" "),_("li",[e._v("禁止冒泡/适当阻止默认事件")])]),e._v(" "),_("h2",{attrs:{id:"具体应用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#具体应用"}},[e._v("#")]),e._v(" 具体应用")]),e._v(" "),_("h3",{attrs:{id:"批量修改vs一个个修改"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#批量修改vs一个个修改"}},[e._v("#")]),e._v(" 批量修改VS一个个修改")]),e._v(" "),_("blockquote",[_("p",[e._v("文本节点也是节点，所以修改文本节点也最好批量")])]),e._v(" "),_("p",[_("strong",[e._v("样式修改 - 优化规则1")])]),e._v(" "),_("ul",[_("li",[e._v("于其使用"),_("code",[e._v("style")]),e._v("一个个修改，还不如使用"),_("code",[e._v("csstext")])])]),e._v(" "),_("p",[_("strong",[e._v("节点操作 - 优化规则1以及规则5及规则2")])]),e._v(" "),_("blockquote",[_("p",[e._v("cloneNode or DocumentFragment脱离文档流")])]),e._v(" "),_("p",[e._v("如果需要添加多个节点，有两种方式优化：")]),e._v(" "),_("ul",[_("li",[e._v("使用"),_("code",[e._v("DocumentFragment")]),e._v("缓存需要添加的节点 - 同样也脱离了文档流")]),e._v(" "),_("li",[e._v("使用"),_("code",[e._v("cloneNode")]),e._v("方法克隆节点A，得到"),_("code",[e._v("cloneB")]),e._v("，然后将生成节点添加到 "),_("strong",[e._v("cloneB")]),e._v("。替换掉节点"),_("code",[e._v("A")]),e._v("，一般通过"),_("code",[e._v("A.parentNode.replaceChild")]),e._v(" - 因为clone得到的节点和原本节点无关，"),_("strong",[e._v("脱离了文档流")])]),e._v(" "),_("li",[e._v("同时"),_("code",[e._v("innerHTML")]),e._v("由于可以解析"),_("code",[e._v("html code")]),e._v("所以也是批量操作的一种方式")])]),e._v(" "),_("p",[e._v("优化第一点和第二点两个可以结合使用，例如使用"),_("code",[e._v("cloneNode")]),e._v("保存"),_("code",[e._v("DocumentFragment")]),e._v("。")]),e._v(" "),_("h3",{attrs:{id:"缓存优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缓存优化"}},[e._v("#")]),e._v(" 缓存优化")]),e._v(" "),_("blockquote",[_("p",[e._v("文本节点也是节点，所以修改文本节点也最好批量")])]),e._v(" "),_("p",[_("strong",[e._v("节点操作 - 优化规则2")])]),e._v(" "),_("ul",[_("li",[e._v("在 "),_("strong",[e._v("批量修改VS一个个修改")]),e._v("提到的，"),_("code",[e._v("cloneNode")]),e._v("和"),_("code",[e._v("DocumentFragment")]),e._v("结合使用。")]),e._v(" "),_("li",[e._v("如果你操作文本，可以将现在"),_("code",[e._v("JS-string")]),e._v("中修改然后同步到"),_("code",[e._v("dom")])]),e._v(" "),_("li",[e._v("同时一个节点是需要之后多次操作的，请保存到变量中，而不是用的时候在"),_("code",[e._v("index or query")])])]),e._v(" "),_("p",[_("strong",[e._v("节点操作 - 结合优化规则3")])]),e._v(" "),_("p",[e._v("由于JS的操作速度由于直接操作"),_("code",[e._v("HTMLCollection以及NodeList")]),e._v("。"),_("strong",[e._v("可以选择将其转换为"),_("code",[e._v("array")])]),e._v("。")]),e._v(" "),_("p",[e._v("转换方法见"),_("a",{attrs:{href:"https://stackoverflow.com/questions/3199588/fastest-way-to-convert-javascript-nodelist-to-array",target:"_blank",rel:"noopener noreferrer"}},[e._v("stackoverflow-nodelist2array"),_("OutboundLink")],1)]),e._v(" "),_("h3",{attrs:{id:"内置方法优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内置方法优化"}},[e._v("#")]),e._v(" 内置方法优化")]),e._v(" "),_("p",[_("strong",[e._v("优化节点获取 - 优化规则4")])]),e._v(" "),_("p",[e._v("我们要知道一些"),_("code",[e._v("node or element")]),e._v("元素的API方法。特别是获取节点list的，例如childNodes, children, 还有特别的"),_("code",[e._v("document.images document.links etc...")]),e._v("。")]),e._v(" "),_("p",[e._v("以及存在直接获取页面图片和表单的接口。")]),e._v(" "),_("p",[e._v("获取这些元素，直接API接口，好过自己写的方法。")]),e._v(" "),_("h3",{attrs:{id:"动画优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#动画优化"}},[e._v("#")]),e._v(" 动画优化")]),e._v(" "),_("p",[e._v("这部分涉及到"),_("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Broswer/Browser-reflow%26repaint.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("重排以及重绘部分姿势"),_("OutboundLink")],1),e._v("。")]),e._v(" "),_("p",[e._v("避免"),_("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Broswer/Browser-reflow%26repaint.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("重排以及重绘"),_("OutboundLink")],1),e._v("可以进行优化，例如将动画的那个图层脱离文档流进行优化")]),e._v(" "),_("h2",{attrs:{id:"链接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#链接"}},[e._v("#")]),e._v(" 链接")]),e._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://juejin.im/entry/58abed228d6d810058bee22f/",target:"_blank",rel:"noopener noreferrer"}},[e._v("例子详细"),_("OutboundLink")],1)]),e._v(" "),_("li",[_("a",{attrs:{href:"https://www.kancloud.cn/kancloud/web_performance_optimization/80990",target:"_blank",rel:"noopener noreferrer"}},[e._v("可以作为上一篇补充"),_("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=o.exports}}]);