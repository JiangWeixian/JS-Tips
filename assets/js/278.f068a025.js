(window.webpackJsonp=window.webpackJsonp||[]).push([[278],{479:function(t,a,s){"use strict";s.r(a);var e=s(0),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"http-性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-性能优化"}},[t._v("#")]),t._v(" HTTP - 性能优化")]),t._v(" "),s("blockquote",[s("p",[t._v("如何从网络层面优化一个网站")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#http---%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"}},[t._v("HTTP - 性能优化")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#html%E4%BC%98%E5%8C%96"}},[t._v("HTML优化")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#dns%E4%BC%98%E5%8C%96"}},[t._v("DNS优化")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#css%E4%BC%98%E5%8C%96"}},[t._v("CSS优化")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96"}},[t._v("加载优化")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E6%9E%84%E5%BB%BA%E4%BC%98%E5%8C%96"}},[t._v("构建优化")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#js%E4%BC%98%E5%8C%96"}},[t._v("JS优化")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"}},[t._v("参考链接")])])])])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("⚠️ WARNING")]),s("br"),t._v("\n性能优化和工程化其实算是双生面。在某种程度上，过度追求性能优化会损害工程性（即不利于优化）。这一点可以从《代码大全》可以得到解答。所以并不需要过度追求性能优化，而应该将工程，可维护性作为第一的要求。然后才是性能优化。")])]),t._v(" "),s("h2",{attrs:{id:"html优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#html优化"}},[t._v("#")]),t._v(" HTML优化")]),t._v(" "),s("p",[t._v("这点网络层面优化手段不多，从"),s("code",[t._v("HTML")]),t._v("的标签(指的是"),s("code",[t._v("div p etc...")]),t._v(")我们无法优化，"),s("strong",[t._v("当然如果能够使用最少元素构建是最好的，避免较多的标签嵌套")]),t._v("。能够想到相关的应该就是"),s("code",[t._v("CDN")]),t._v("方面的。")]),t._v(" "),s("p",[t._v("我们只能够从"),s("code",[t._v("DNS&CSS&JS")]),t._v("角度触发。")]),t._v(" "),s("h2",{attrs:{id:"dns优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns优化"}},[t._v("#")]),t._v(" DNS优化")]),t._v(" "),s("p",[t._v("见"),s("a",{attrs:{href:"http://bubkoo.com/2015/11/19/prefetching-preloading-prebrowsing/",target:"_blank",rel:"noopener noreferrer"}},[t._v("文章1"),s("OutboundLink")],1),t._v("or"),s("a",{attrs:{href:"https://github.com/GeoffZhu/geoffzhu.github.io/issues/2",target:"_blank",rel:"noopener noreferrer"}},[t._v("文章2"),s("OutboundLink")],1),t._v(" - 里面对图片等资源的预加载。")]),t._v(" "),s("h2",{attrs:{id:"css优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#css优化"}},[t._v("#")]),t._v(" CSS优化")]),t._v(" "),s("p",[t._v("页面中的"),s("code",[t._v("CSS")]),t._v("从开始到渲染涉及到三个过程：")]),t._v(" "),s("ol",[s("li",[t._v("加载")]),t._v(" "),s("li",[t._v("构建"),s("code",[t._v("CSS-DOM-TREE")])]),t._v(" "),s("li",[t._v("渲染")])]),t._v(" "),s("p",[t._v("其中前两个是可以优化的。")]),t._v(" "),s("h3",{attrs:{id:"加载优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载优化"}},[t._v("#")]),t._v(" 加载优化")]),t._v(" "),s("p",[t._v("合并"),s("code",[t._v("CSS")]),t._v("文件可以减少"),s("code",[t._v("HTTP")]),t._v("请求，可以优化。"),s("strong",[t._v("但是假设我们有两个个样式文件，其中一个全局(无论什么条件下都会起作用)，其余一个是"),s("code",[t._v("media query")]),t._v("作用在屏幕尺寸改变的时候")])]),t._v(" "),s("p",[t._v("明显后面那个是不需要再页面加载的时候就加载进来的。可以比第一个稍微延迟一点。因此我们可以通过")]),t._v(" "),s("div",{staticClass:"language-HTML extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("index.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("print.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("media")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("print"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("other.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("media")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(min-width: 30em) and (orientation: landscape)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("后面两个添加了"),s("code",[t._v("meida")]),t._v("，所以会延迟加载，也就是当加载好"),s("code",[t._v("index.css")]),t._v("之后，就会开始进行"),s("code",[t._v("HTML-DOM-TREE")]),t._v("构建。而后面两个会同步加载，但是不会影响"),s("code",[t._v("CSS-DOM-TREE&HTML-DOM-TREE")]),t._v("构建。至少再页面开始的时候是这样的。")]),t._v(" "),s("p",[t._v("另外，学会合并"),s("code",[t._v("CSS")]),t._v("文件")]),t._v(" "),s("ul",[s("li",[t._v("按作用页面分类合并"),s("code",[t._v("CSS")]),t._v("文件")]),t._v(" "),s("li",[t._v("独立第三方的"),s("code",[t._v("CSS")]),t._v("框架的文件")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("💡 NOTE")]),s("br"),t._v("\n在现代工程中。分割第三方"),s("code",[t._v("CSS")]),t._v("框架是可控的，就像是导入"),s("code",[t._v("tailwindcss")]),t._v("的主要文件。但是倒入项目组件的样式文件，基本上都是由"),s("code",[t._v("webpack")]),t._v("构建工具控制的。")])]),t._v(" "),s("h3",{attrs:{id:"构建优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建优化"}},[t._v("#")]),t._v(" 构建优化")]),t._v(" "),s("blockquote",[s("p",[t._v("这一点和"),s("code",[t._v("HTTP")]),t._v("无关")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("给需要标签添加"),s("code",[t._v("class")]),t._v("是优化重要步骤 - 此时要涉及到"),s("code",[t._v("CSS-DOM-TREE")]),t._v("的构建规则，如果看过"),s("code",[t._v("JQ")]),t._v("实现其选择器的源码的话，就会发现它 "),s("strong",[t._v("并不是从左到右边的选择")]),t._v("，即当"),s("code",[t._v(".class a")]),t._v("，并不是找到"),s("code",[t._v(".class")]),t._v("元素，然后再再其中找到"),s("code",[t._v("a")]),t._v("元素。")]),t._v(" "),s("p",[t._v("而是遵循从右到左原则，先找到"),s("code",[t._v("a")]),t._v("元素然后再由上找到"),s("code",[t._v(".class")]),t._v("元素。浏览器也是这样的规则。")]),t._v(" "),s("p",[t._v("所以页面众多"),s("code",[t._v("a")]),t._v("标签，却只有"),s("code",[t._v(".class")]),t._v("元素。先是找到"),s("code",[t._v("a")]),t._v("标签，由于"),s("code",[t._v("a")]),t._v("标签过多，这一步很影响，所以给需要的"),s("code",[t._v("a")]),t._v("标签添加"),s("code",[t._v("class")]),t._v("是优化重要步骤。")]),t._v(" "),s("p",[t._v("这部分的"),s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/29418126",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("code",[t._v("CSS-DOM-TREE")]),t._v("树结构优化 - 首先这是个书结构，所以层级不要太深，树结构不要太复杂能够优化解析。")]),t._v(" "),s("ul",[s("li",[t._v("选择器不要太多，比如说从"),s("code",[t._v("html")]),t._v("标签开始选择一个"),s("code",[t._v("a")]),t._v("标签")]),t._v(" "),s("li",[t._v("不要使用比较短的"),s("code",[t._v("class-name")])])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.oschina.net/translate/writing-efficient-css-selectors",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考-编写高效的CSS"),s("OutboundLink")],1),t._v(" - 不过也要从适合自己角度触发。")]),t._v(" "),s("h2",{attrs:{id:"js优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js优化"}},[t._v("#")]),t._v(" JS优化")]),t._v(" "),s("p",[t._v("一般来说JS在下载和运行过程中都会干扰到HTML解析。所以一般会放在最后。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/docs/Network/img/script.png",alt:"script干扰"}})]),t._v(" "),s("p",[t._v("和"),s("code",[t._v("CSS")]),t._v("一样，页面中的"),s("code",[t._v("JS")]),t._v("从开始到渲染涉及到三个过程：")]),t._v(" "),s("ol",[s("li",[t._v("加载")]),t._v(" "),s("li",[t._v("运行")]),t._v(" "),s("li",[t._v("渲染")])]),t._v(" "),s("p",[t._v("对于加载部分性能优化，完整部分见"),s("router-link",{attrs:{to:"/docs/Broswer/Browser-浏览器渲染原理.html"}},[t._v("Browser-浏览器渲染过程")])],1),t._v(" "),s("p",[t._v("对于现代浏览器来说")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("defer async")]),t._v("应该放在页面头部")])]),t._v(" "),s("h2",{attrs:{id:"参考链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.im/entry/58ce00c5ac502e00589b4bde",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP-OSI建立链接全过程"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.im/post/5872309261ff4b005c4580d4",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP-建立链接过程更为详细"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);