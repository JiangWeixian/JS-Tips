(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{540:function(t,a,s){"use strict";s.r(a);var e=s(0),o=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"proto-操作指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proto-操作指南"}},[t._v("#")]),t._v(" proto - 操作指南")]),t._v(" "),s("blockquote",[s("p",[t._v("由哪些需要注意的细节")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#proto---%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97"}},[t._v("proto - 操作指南")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#11-%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86---%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%80%BC%E7%B1%BB%E5%9E%8B"}},[t._v("1.1. 前置知识 - 引用类型和值类型")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#12-%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0%E5%B7%AE%E5%BC%82"}},[t._v("1.2. 内建函数差异")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#121-objectgetprototypeof"}},[t._v("1.2.1. Object.getPrototypeof")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#122-objectprototypeisprototypeof"}},[t._v("1.2.2. Object.prototype.isPrototypeOf()")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#123-objectsetprototypeof--objectcreate"}},[t._v("1.2.3. Object.setPrototypeOf() && Object.create()")])])])])])])]),t._v(" "),s("h2",{attrs:{id:"_1-1-前置知识-引用类型和值类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-前置知识-引用类型和值类型"}},[t._v("#")]),t._v(" 1.1. 前置知识 - 引用类型和值类型")]),t._v(" "),s("p",[t._v("见"),s("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%B7%AE%E5%BC%82.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-引用类型和值类型"),s("OutboundLink")],1),t._v(" - 同时里面提到了手动修改"),s("code",[t._v("prototype")]),t._v("的情况。")]),t._v(" "),s("h2",{attrs:{id:"_1-2-内建函数差异"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-内建函数差异"}},[t._v("#")]),t._v(" 1.2. 内建函数差异")]),t._v(" "),s("blockquote",[s("p",[t._v("虽然名字带有prototype，但是其实操作的还是"),s("code",[t._v("__proto__")])])]),t._v(" "),s("ul",[s("li",[t._v("Object.getPrototypeof")]),t._v(" "),s("li",[t._v("Object.setPrototypeOf()")]),t._v(" "),s("li",[t._v("Object.prototype.isPrototypeOf()")]),t._v(" "),s("li",[t._v("Object.create()")])]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("myName")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("label")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or Bar.prototype = new Foo()")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("speak")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bar "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("由"),s("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS-__proto__%26%26prototype%26%26new.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-proto&prototype&constructor&new"),s("OutboundLink")],1),t._v("，可以得到"),s("code",[t._v("bar")]),t._v("内部结构为：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("name\nlabel\n__proto__ "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// proto1")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Bar.prototype")]),t._v("\n  speak\n  __proto__ "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// proto2")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 来自Foo.prototype")]),t._v("\n    myName\n    constructor\n    __proto__\n")])])]),s("h3",{attrs:{id:"_1-2-1-object-getprototypeof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-object-getprototypeof"}},[t._v("#")]),t._v(" 1.2.1. Object.getPrototypeof")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("Object.getPrototypeof()")]),t._v(" - "),s("strong",[t._v("获取的是最外层的"),s("code",[t._v("__proto__")])]),t._v("。并不是获取"),s("code",[t._v("prototype")]),t._v("。")])]),t._v(" "),s("p",[t._v("我的意思是获取"),s("code",[t._v("a.__proto__")]),t._v("而不是"),s("code",[t._v("a.prototype")]),t._v("。在"),s("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS-__proto__%26%26prototype%26%26new.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-proto&prototype"),s("OutboundLink")],1),t._v("中我们知道，其实对象不一定就"),s("code",[t._v("prototype")]),t._v("属性。")]),t._v(" "),s("p",[t._v("就像是在"),s("a",{attrs:{href:""}},[t._v("1.2. 内建函数差异")]),s("code",[t._v("bar")]),t._v("内部结构中，我们获取的是"),s("code",[t._v("proto1")]),t._v("而不是"),s("code",[t._v("proto2")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_1-2-2-object-prototype-isprototypeof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-object-prototype-isprototypeof"}},[t._v("#")]),t._v(" 1.2.2. Object.prototype.isPrototypeOf()")]),t._v(" "),s("blockquote",[s("p",[t._v("有点类似"),s("code",[t._v("instanceof")]),t._v("。同时注意这是个"),s("code",[t._v("prototype")]),t._v("上的方法，意味着它可以被对象继承，通过"),s("code",[t._v("xx.isPrototypeOf")]),t._v("使用而不是"),s("code",[t._v("Object.")])])]),t._v(" "),s("p",[t._v("类似"),s("code",[t._v("instanceof")]),t._v("意味着它会 "),s("strong",[t._v("递归比较！")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Bar.prototype.isPrototypeOf(bar) // true")])]),t._v(" "),s("li",[s("code",[t._v("Foo.prototype.isPrototypeOf(bar) // true")])])]),t._v(" "),s("p",[t._v("同样也有和"),s("code",[t._v("instanceof")]),t._v("一样的问题，如果"),s("code",[t._v("Bar.prototype = {}")]),t._v("，"),s("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%B7%AE%E5%BC%82.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-引用类型和值类型"),s("OutboundLink")],1),t._v("提到的并不会同步修改"),s("code",[t._v("proto1")]),t._v("。此时导致"),s("code",[t._v("Bar.prototype.isPrototypeOf(bar) // false")])]),t._v(" "),s("h3",{attrs:{id:"_1-2-3-object-setprototypeof-object-create"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-object-setprototypeof-object-create"}},[t._v("#")]),t._v(" 1.2.3. Object.setPrototypeOf() && Object.create()")]),t._v(" "),s("blockquote",[s("p",[t._v("语义上都是设置新的原型。")])]),t._v(" "),s("p",[t._v("使用上也有差异：")]),t._v(" "),s("p",[s("code",[t._v("Object.setPrototypeOf(bar, xx)")]),t._v("会替换"),s("code",[t._v("bar")]),t._v("最外层的"),s("code",[t._v("__proto__")]),t._v("(也就是"),s("code",[t._v("proto1")]),t._v(")为"),s("code",[t._v("xx")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrototypeOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 首先我们要知道c内部结构")]),t._v("\n__proto__\n  constructor\n    prototype\nprototype\n  constructor\n  __prototype\n")])])]),s("p",[t._v("因此经过了"),s("code",[t._v("Object.setPrototypeOf(bar, xx)")]),t._v("操作之后，"),s("code",[t._v("bar")]),t._v("结构变为了：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("name\nlabel\n__proto__ "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// proto1")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以下来自function c")]),t._v("\n  prototype\n    constructor\n    __prototype\n")])])]),s("p",[t._v("而对于"),s("code",[t._v("Object.create(c.prototype)")]),t._v("。就像是"),s("a",{attrs:{href:""}},[t._v("1.2. 内建函数差异")]),t._v("使用的那样，我们先知道"),s("code",[t._v("Object.create")]),t._v("返回结果：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("__proto__\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// c.prototype")]),t._v("\n  constructor\n  __proto__\n")])])]),s("p",[t._v("正如"),s("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/docs/Grammar/JS%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%B7%AE%E5%BC%82.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS-引用类型和值类型"),s("OutboundLink")],1),t._v("提到的那样，如果：")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 并不会同步修改proto1")]),t._v("\n")])])]),s("p",[t._v("想要达到"),s("code",[t._v("Object.setPrototypeOf(bar, xx)")]),t._v("一样的效果。必须通过"),s("code",[t._v("bar.__proto__ = Object.create(c.prototype)")]),t._v("。")])])}),[],!1,null,null,null);a.default=o.exports}}]);