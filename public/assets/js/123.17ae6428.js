(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{439:function(v,_,e){"use strict";e.r(_);var t=e(0),o=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"发布订阅模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发布订阅模式"}},[v._v("#")]),v._v(" 发布订阅模式")]),v._v(" "),e("blockquote",[e("p",[v._v("我通知->你执行")])]),v._v(" "),e("h2",{attrs:{id:"什么是发布订阅模式？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是发布订阅模式？"}},[v._v("#")]),v._v(" 什么是发布订阅模式？")]),v._v(" "),e("p",[v._v("订阅了主题，每次主题发布了什么消息。")]),v._v(" "),e("p",[v._v("作为订阅者就能够获得发布的消息。")]),v._v(" "),e("p",[v._v("其中在浏览器中"),e("code",[v._v("DOM")]),v._v("点击事件就是很直接的发布订阅模式。")]),v._v(" "),e("p",[v._v("在"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/Grammar/JS-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6.md",target:"_blank",rel:"noopener noreferrer"}},[v._v("JS-TIPS-自定义事件-发布订阅"),e("OutboundLink")],1),v._v("实现了"),e("strong",[v._v("自定义事件")]),v._v("。")]),v._v(" "),e("p",[v._v("有一个特点，类似"),e("code",[v._v("addEventLisnter")]),v._v("。")]),v._v(" "),e("ol",[e("li",[v._v("添加监听 - 每次添加函数并不会覆盖之前的函数，而是加入到函数列表中")]),v._v(" "),e("li",[v._v("触发 - 可能会暴露某些数据(通过将参数传递到监听函数中)")]),v._v(" "),e("li",[v._v("移除 - 通过"),e("code",[v._v("slice")]),v._v("移除函数列表")])]),v._v(" "),e("p",[v._v("以上三个一般必须")]),v._v(" "),e("h2",{attrs:{id:"实现它"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现它"}},[v._v("#")]),v._v(" 实现它")]),v._v(" "),e("p",[v._v("文中举例和我上面例子是类似的。")]),v._v(" "),e("p",[v._v("就像是我实现的"),e("a",{attrs:{href:"https://github.com/JiangWeixian/JS-Tips/blob/master/Grammar/JS-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6.md",target:"_blank",rel:"noopener noreferrer"}},[v._v("JS-TIPS-自定义事件-发布订阅"),e("OutboundLink")],1),v._v("其中定义了"),e("code",[v._v("target")]),v._v("管理所有添加到里面的事件")]),v._v(" "),e("ol",[e("li",[e("p",[e("strong",[v._v("非常适合那些需要后续追加功能的情况")]),v._v("。例如我们先写了"),e("code",[v._v("login")]),v._v("模块，我们需要在"),e("code",[v._v("login")]),v._v("模块之后触发一些函数。")]),v._v(" "),e("p",[v._v("如果使用了"),e("strong",[v._v("发布订阅模式")]),v._v("，在接下来需要触发额外的函数的时候。不需要在"),e("code",[v._v("login")]),v._v("的回调函数添加(因为这可能写在了非常深的代码位置)，可以通过订阅模式监听"),e("code",[v._v("login status")]),v._v("。每次需要触发新的函数的使用，就将新的函数通过"),e("code",[v._v("listner or on")]),v._v("的方式添加到"),e("code",[v._v("login")]),v._v("模块中。")])]),v._v(" "),e("li",[e("p",[v._v("如果两个模块需要同一块数据，只需要在"),e("code",[v._v("A")]),v._v("模块触发"),e("code",[v._v("eventkey")]),v._v("的时候暴露那部分数据，以及在"),e("code",[v._v("B")]),v._v("触发某些函数的时候监听"),e("code",[v._v("eventkey")]),v._v("。")]),v._v(" "),e("p",[e("code",[v._v("A")]),v._v("模块触发"),e("code",[v._v("eventkey")]),v._v("的时候就会触发在"),e("code",[v._v("B")]),v._v("模块添加的监听事件。")])]),v._v(" "),e("li",[e("p",[v._v("命名空间 -  "),e("code",[v._v("Event.create( 'namespace2' ).listen( 'click', function(a){}")]),v._v("实现"),e("code",[v._v("create")]),v._v("关键在于返回一个含有和"),e("code",[v._v("Event")]),v._v("具有相同接口函数的对象。"),e("strong",[v._v("这也是实现链式调用的关键")]),v._v("。")])])])])}),[],!1,null,null,null);_.default=o.exports}}]);