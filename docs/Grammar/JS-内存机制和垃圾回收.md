# JS - 内存机制和垃圾回收
> 先简单写一下，以后看了《JS高级程序设计》之后补充

<!-- TOC -->

- [JS - 内存机制和垃圾回收](#js---内存机制和垃圾回收)
  - [内存机制](#内存机制)
  - [垃圾回收 - GC](#垃圾回收---gc)
    - [内存泄漏](#内存泄漏)
    - [释放内存](#释放内存)
  - [链接](#链接)

<!-- /TOC -->

## 内存机制

* 变量初始化的时候分配内存
  * 其中简单初始化一个函数不算，如`function a`(这一点我存有疑惑)
* 匿名函数也算

## 垃圾回收 - GC

原来这家伙叫垃圾回收。**周期性的找到那些不再使用变量，关键在于如何找到这些变量**

首先我们分析函数域(形成的局部)

* 对于函数`function a` - 在执行时候分配内存(以下文章提到的)
* 由于变量只在函数内部起作用，函数调用结束之后，**函数内存连带着它里面的变量一起被GC**

以上特殊情况是：

1. 如果函数内部有返回值，那么就不会被释放(所以递归是比较消耗内存的)
2. 没有返回值，调用结束之后被释放

以上结论可以细化为变量(**标记清除**问题)，如果变量是 **有数值的，那么标记为使用的。**就像是上面的函数使用的时候分配内存。于是就有了下面 **内存释放**的方式。

### 内存泄漏

如果存在循环引用的话，**导致了变量一直是被使用的状态**

### 释放内存

将不用的变量设置为`null`

## 链接

主要是对以下文章的理解总结：

* [内存机制和垃圾回收](https://neveryu.github.io/2017/02/18/js-memory-management-and-gc/)